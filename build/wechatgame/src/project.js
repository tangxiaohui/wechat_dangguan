require=function o(r,_,l){function h(t,e){if(!_[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(a)return a(t,!0);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}var n=_[t]={exports:{}};r[t][0].call(n.exports,function(e){return h(r[t][1][e]||e)},n,n.exports,o,r,_,l)}return _[t].exports}for(var a="function"==typeof require&&require,e=0;e<l.length;e++)h(l[e]);return h}({AnswerScene:[function(e,t,i){"use strict";cc._RF.push(t,"e301fCPMlpIrZvf010wkFXY","AnswerScene");var h=e("Player"),s=e("Question"),l=cc.Enum({PIPEI:1,ANSWER:2,JUDGE:3,REVIVE:4,END:5});cc.Class({extends:cc.Component,properties:{btn_right:cc.Node,btn_wrong:cc.Node,lbl_question_info:cc.Label,lbl_question_title:cc.Label,panel_root:cc.Node,panel_revive:cc.Node,btn_exit:cc.Node,btn_revive:cc.Node,lbl_time:cc.Label},onLoad:function(){this.panel_root=cc.find("Canvas/panel_root"),this.gameState=l.PIPEI,this.judgement=null,_G.QuestionClass=new s,_G.QuestionClass.init(),this.initUI(),this.MySide=h.Side.left,this.myPlayerMoving=!1,this.initPlayer(),this.dead_times=0,this.Pipei_time=4,this.Answer_time=5,this.MyIndex=0,this.isMoving=!1,this.reviveTime=5},initUI:function(){this.lbl_question_info.string="匹配中",this.lbl_question_title.string="10",this.btn_right.active=!1,this.btn_wrong.active=!1,this.btn_right.on(cc.Node.EventType.TOUCH_START,this.rightClickEvent,this),this.btn_wrong.on(cc.Node.EventType.TOUCH_START,this.wrongClickEvent,this),1==_G.Enable_Ads_Sdk&&(this.btn_exit.on(cc.Node.EventType.TOUCH_START,this.exitviveEvent,this),this.btn_revive.on(cc.Node.EventType.TOUCH_START,this.reviveEvent,this),this.lbl_time.string="10",this.panel_revive.setLocalZOrder(1e3))},initPlayer:function(){(_G.AnswerScene=this).player_pos_left=new Array,this.player_pos_right=new Array;for(var e=0;e<21;e++)this.player_pos_left[e]=cc.v2(100+e%3*100,400+100*Math.floor(e/3));for(e=0;e<21;e++)this.player_pos_right[e]=cc.v2(450+e%3*100,400+100*Math.floor(e/3));this.left_player_num=0,this.right_player_num=0,this.match_player_num=50,this.player_pos_left_node=new Array,this.player_pos_right_node=new Array;for(e=0;e<this.match_player_num;e++){var t=new h;if(t.init(e),0==e&&(this.MySide=t.side,this.MySide==h.Side.left?this.judgement="对":this.judgement="错"),15<=this.left_player_num||15<=this.right_player_num){this.match_player_num=e;break}t.side==h.Side.left?(this.player_pos_left_node[this.left_player_num]=t,this.panel_root.addChild(t.player),t.player.setLocalZOrder(1e3-this.left_player_num),t.index=this.left_player_num,t.targetindex=this.left_player_num,this.left_player_num++):t.side==h.Side.right&&(this.player_pos_right_node[this.right_player_num]=t,this.panel_root.addChild(t.player),t.player.setLocalZOrder(1e3-this.right_player_num),t.index=this.right_player_num,t.targetindex=this.right_player_num,this.right_player_num++),(.5<Math.random()&&h.Side.left||h.Side.right)==h.Side.left?t.player.setPosition(cc.v2(-200,1400)):t.player.setPosition(cc.v2(820,1400))}_G.QuestionClass.all_match_player=this.player_pos_left_node.length+this.player_pos_right_node.length,this.BeginGameStatePIPEI()},BeginGameStatePIPEI:function(){this.move_time=.3;var r=0,_=0;this.callback=function(){if(0==this.Pipei_time&&(this.unschedule(this.callback),this.gameState=l.BEGIN,this.BeginGameStateBEGIN()),this.lbl_question_title.string=this.Pipei_time,3==this.Pipei_time){for(var e=this.left_player_num-r,t=0;t<e;t++){var i=cc.moveTo(this.move_time,this.player_pos_left[r+t]),s=cc.delayTime(Math.random());this.player_pos_left_node[r+t].player.runAction(cc.sequence(s,i))}var n=this.right_player_num-_;for(t=0;t<n;t++){i=cc.moveTo(this.move_time,this.player_pos_right[_+t]),s=cc.delayTime(Math.random());this.player_pos_right_node[_+t].player.runAction(cc.sequence(s,i))}}else if(this.Pipei_time<3&&0<this.Pipei_time);else{var o=(this.Pipei_time-3)/((this.Pipei_time-3)*(this.Pipei_time-2)/2)*this.left_player_num;for(t=0;t<Math.floor(o);t++){i=cc.moveTo(this.move_time,this.player_pos_left[r+t]),s=cc.delayTime(Math.random());this.player_pos_left_node[r+t].player.runAction(cc.sequence(s,i))}r+=Math.floor(o);for(o=(this.Pipei_time-3)/28*this.right_player_num,t=0;t<Math.floor(o);t++){i=cc.moveTo(this.move_time,this.player_pos_right[_+t]),s=cc.delayTime(Math.random());this.player_pos_right_node[_+t].player.runAction(cc.sequence(s,i))}_+=Math.floor(o)}this.Pipei_time--},this.schedule(this.callback,1)},BeginGameStateBEGIN:function(){this.btn_wrong.active=!0,this.btn_right.active=!0;var e=this.Answer_time,t=_G.QuestionClass.findQuestion();this.lbl_question_title.string=e,this.lbl_question_info.string=t.question,this.Answer_info=t.answer,this.QuestionCallback=function(){e<=this.Answer_time-1&&(0==this.myPlayerMoving&&1<e&&this.runOtherPerson(),e<=0&&(this.unschedule(this.QuestionCallback),this.gameState=l.JUDGE,this.BeginGameStateJUDGE()),this.lbl_question_title.string=e),e--},this.schedule(this.QuestionCallback,1)},BeginGameStateREVIVE:function(){this.reviveCallBack=function(){this.lbl_time.string=this.reviveTime,0==this.reviveTime&&(this.panel_revive.active=!1,this.BeginGameStateEnd(),this.unschedule(this.reviveCallBack)),this.reviveTime--},this.schedule(this.reviveCallBack,1)},exitviveEvent:function(){this.unschedule(this.reviveCallBack),this.panel_revive.active=!1,this.BeginGameStateEnd()},reviveEvent:function(){this.panel_revive.active=!1,this.BeginGameStateBEGIN()},BeginGameStateEnd:function(){this.player_pos_left_node.length+this.player_pos_right_node.length==0?_G.QuestionClass.paiming=3:_G.QuestionClass.paiming=this.player_pos_left_node.length+this.player_pos_right_node.length,cc.director.loadScene("SettleScene")},BeginGameStateJUDGE:function(){this.btn_wrong.active=!1,this.btn_right.active=!1,this.judgeCallback=function(){if(this.unschedule(this.judgeCallback),this.MySide==h.Side.left?(this.MyIndex=this.findMyIndex(h.Side.left),this.tempPlayer=this.player_pos_left_node[this.MyIndex]):this.MySide==h.Side.right&&(this.MyIndex=this.findMyIndex(h.Side.right),this.tempPlayer=this.player_pos_right_node[this.MyIndex]),"对"==this.Answer_info){for(var e=0;e<this.player_pos_right_node.length;e++)this.player_pos_right_node[e].player.removeFromParent();this.player_pos_right_node=new Array,this.right_player_num=0}else if("错"==this.Answer_info){for(e=0;e<this.player_pos_left_node.length;e++)this.player_pos_left_node[e].player.removeFromParent();this.player_pos_left_node=new Array,this.left_player_num=0}this.judgement==this.Answer_info?this.player_pos_left_node.length+this.player_pos_right_node.length==1?(cc.log("吃鸡了！！！"),this.BeginGameStateEnd()):(cc.log("答对了，还有多少人，继续答题吧"),this.BeginGameStateBEGIN()):(this.dead_times++,1==_G.Enable_Ads_Sdk&&3<=this.dead_times||0==_G.Enable_Ads_Sdk?(cc.log("错误次数太多了，结束！"),this.BeginGameStateEnd()):(cc.log("答错了，复活吧"),this.panel_revive.active=!0,this.BeginGameStateREVIVE()))},this.schedule(this.judgeCallback,1,1)},findMyIndex:function(e){if(e==h.Side.right){for(var t=0;t<this.player_pos_right_node.length;t++)if(0==this.player_pos_right_node[t].playerFlag)return t}else for(t=0;t<this.player_pos_left_node.length;t++)if(0==this.player_pos_left_node[t].playerFlag)return t},rightClickEvent:function(){if(this.judgement="对",this.MySide==h.Side.right){this.myPlayerMoving=!0;var e,t=this.findMyIndex(h.Side.right);if(this.player_pos_right_node[t].side=h.Side.left,0==this.player_pos_left_node.length){e=0,this.player_pos_right_node[t].targetindex=e,this.player_pos_right_node[t].targetside=h.Side.left;var i=this.player_pos_right_node[t];if(this.player_pos_right_node.splice(t,1),this.player_pos_left_node.splice(e,0,i),this.runNode(e,h.Side.left),0!=this.player_pos_right_node.length){this.player_pos_right_node[this.player_pos_right_node.length-1].targetindex=t;i=this.player_pos_right_node[this.player_pos_right_node.length-1];this.player_pos_right_node.splice(this.player_pos_right_node.length-1,1),this.player_pos_right_node.splice(t,0,i),this.runNode(t,h.Side.right)}}else{e=this.player_pos_right_node.length<=3?Math.floor((Math.random()-.01)*this.right_player_num):Math.floor(3*(Math.random()-.01)),this.player_pos_right_node[t].targetindex=e;i=this.player_pos_right_node[t];this.player_pos_right_node.splice(t,1),this.player_pos_right_node.splice(t,0,this.player_pos_left_node[e]),this.player_pos_left_node.splice(e,1),this.player_pos_left_node.splice(e,0,i),this.runNode(e,h.Side.left),this.runNode(t,h.Side.right)}this.left_player_num=this.player_pos_left_node.length,this.right_player_num=this.player_pos_right_node.length,this.MySide=h.Side.left,this.MyIndex=e,this.myPlayerMoving=!1}},wrongClickEvent:function(){if(this.judgement="错",this.MySide==h.Side.left){this.myPlayerMoving=!0;var e,t=this.findMyIndex(h.Side.left);if(this.player_pos_left_node[t].side=h.Side.right,0==this.player_pos_right_node.length){e=0,this.player_pos_left_node[t].targetindex=e,this.player_pos_left_node[t].targetside=h.Side.right;var i=this.player_pos_left_node[t];if(this.player_pos_left_node.splice(t,1),this.player_pos_right_node.splice(e,0,i),this.runNode(e,h.Side.right),0!=this.player_pos_left_node.length){this.player_pos_left_node[this.player_pos_left_node.length-1].targetindex=t;i=this.player_pos_left_node[this.player_pos_left_node.length-1];this.player_pos_left_node.splice(this.player_pos_left_node.length-1,1),this.player_pos_left_node.splice(t,0,i),this.runNode(t,h.Side.left)}}else{e=this.player_pos_right_node.length<=3?Math.floor((Math.random()-.01)*this.right_player_num):Math.floor(3*(Math.random()-.01)),this.player_pos_left_node[t].targetindex=e;i=this.player_pos_left_node[t];this.player_pos_left_node.splice(t,1),this.player_pos_left_node.splice(t,0,this.player_pos_right_node[e]),this.player_pos_right_node.splice(e,1),this.player_pos_right_node.splice(e,0,i),this.runNode(t,h.Side.left),this.runNode(e,h.Side.right)}this.left_player_num=this.player_pos_left_node.length,this.right_player_num=this.player_pos_right_node.length,this.MySide=h.Side.right,this.MyIndex=e,this.myPlayerMoving=!1}},runOtherPerson:function(){var e,t;cc.log("左边多少人"+this.left_player_num),cc.log("右边多少人"+this.right_player_num),this.player_pos_left_node.length<=3?e=0:(e=Math.floor(5*Math.random()))>this.left_player_num?e=this.left_player_num:30<e+this.right_player_num&&(e-=e+this.right_player_num-30),cc.log("runPersionNum_left"+e);for(var i=0;i<e;i++){if(!((_=Math.floor((Math.random()-.001)*this.player_pos_left_node.length))>=this.player_pos_left_node.length)&&0!=this.player_pos_left_node[_].playerFlag){this.player_pos_left_node[_].targetside=h.Side.right,cc.log("左边 谁移动  "+_);var s=Math.floor((Math.random()-.001)*this.player_pos_right_node.length);this.player_pos_left_node[_].targetindex=s,cc.log("左边 移动到  "+s),this.player_pos_right_node.splice(s,0,this.player_pos_left_node[_]),this.player_pos_left_node.splice(_,1);for(var n=s+1;n<this.player_pos_right_node.length;n++)this.player_pos_right_node[n].targetindex=n;for(var o=_;o<this.player_pos_left_node.length;o++)this.player_pos_left_node[o].targetindex=o;this.left_player_num--,this.right_player_num++}}this.player_pos_right_node.length<=3?t=0:(t=Math.floor(5*Math.random()))>this.right_player_num?t=this.right_player_num:30<t+this.left_player_num&&(t-=t+this.left_player_num-30),cc.log("runPersionNum_right"+t);for(var r=0;r<t;r++){var _;if(!((_=Math.floor(3+(Math.random()-.001)*(this.player_pos_right_node.length-3)))>=this.player_pos_right_node.length)&&0!=this.player_pos_right_node[_].playerFlag){this.player_pos_right_node[_].targetside=h.Side.left,cc.log("右边 谁移动  "+_);s=Math.floor(3+(Math.random()-.001)*(this.player_pos_left_node.length-3));this.player_pos_right_node[_].targetindex=s,cc.log("右边 移动到  "+s),this.player_pos_left_node.splice(s,0,this.player_pos_right_node[_]),this.player_pos_right_node.splice(_,1);for(n=s+1;n<this.player_pos_left_node.length;n++)this.player_pos_left_node[n].targetindex=n;for(o=_;o<this.player_pos_right_node.length;o++)this.player_pos_right_node[o].targetindex=o;this.right_player_num--,this.left_player_num++}}for(var l=0;l<this.player_pos_left_node.length;l++)this.player_pos_left_node[l].targetindex==this.player_pos_left_node[l].index&&this.player_pos_left_node[l].targetside==this.player_pos_left_node[l].side||(cc.log("side "+this.player_pos_left_node[l].side+" targetside "+this.player_pos_left_node[l].targetside+" i "+l+"from "+this.player_pos_left_node[l].index+" to "+this.player_pos_left_node[l].targetindex),this.runNode(l,this.player_pos_left_node[l].targetside));for(l=0;l<this.player_pos_right_node.length;l++)this.player_pos_right_node[l].targetindex==this.player_pos_right_node[l].index&&this.player_pos_right_node[l].targetside==this.player_pos_right_node[l].side||(cc.log("side "+this.player_pos_right_node[l].side+" targetside "+this.player_pos_right_node[l].targetside+"i   "+l+"from "+this.player_pos_right_node[l].index+" to "+this.player_pos_right_node[l].targetindex),this.runNode(l,this.player_pos_right_node[l].targetside))},runNode:function(e,t){this.moveTime=.3;if(t==h.Side.right){var i=cc.delayTime(.69*Math.random()),s=cc.moveTo(this.moveTime,this.player_pos_right[e]),n=cc.callFunc(function(){}),o=cc.sequence(i,s,n);cc.log(e+" right现在的位置 "+this.player_pos_right_node[e].player.x+" "+this.player_pos_right_node[e].player.y),cc.log(e+" right要去的位置 "+this.player_pos_right[e].x+" "+this.player_pos_right[e].y),this.player_pos_right_node[e].player.runAction(o),this.player_pos_right_node[e].index=this.player_pos_right_node[e].targetindex,this.player_pos_right_node[e].side=this.player_pos_right_node[e].targetside,this.player_pos_right_node[e].player.setLocalZOrder(1e3-e)}else{i=cc.delayTime(.69*Math.random()),s=cc.moveTo(this.moveTime,this.player_pos_left[e]),n=cc.callFunc(function(){}),o=cc.sequence(i,s,n);cc.log(e+" left现在的位置 "+this.player_pos_left_node[e].player.x+" "+this.player_pos_left_node[e].player.y),cc.log(e+" left要去的位置 "+this.player_pos_left[e].x+" "+this.player_pos_left[e].y),this.player_pos_left_node[e].player.runAction(o),this.player_pos_left_node[e].index=this.player_pos_left_node[e].targetindex,this.player_pos_left_node[e].side=this.player_pos_left_node[e].targetside,this.player_pos_left_node[e].player.setLocalZOrder(1e3-e)}}}),cc._RF.pop()},{Player:"Player",Question:"Question"}],Global:[function(e,t,i){"use strict";cc._RF.push(t,"b4e0cKdVyRBb6bSWg/AQ/hv","Global"),window._G={gameManager:null,AnswerScene:null,SettleScene:null,QuestionClass:null,Enable_Ads_Sdk:!0},cc._RF.pop()},{}],MainScene:[function(e,t,i){"use strict";cc._RF.push(t,"12032VXh6pGVo6ZbMgEnCHp","MainScene"),cc.Class({extends:cc.Component,properties:{},start:function(){console.log("开始游戏哦！");console.log("click __onClickLogin ");var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200<=t.status&&t.status<400){var e=t.responseText;console.log(e)}};t.open("GET","https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx3d117d5543df8afe&redirect_uri=http://mascot.duapp.com/oauth2.php&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect",!0),t.send()}}),cc._RF.pop()},{}],Player:[function(e,t,i){"use strict";cc._RF.push(t,"b9dabsv42pKrYq6BTy+4mMJ","Player");var s=cc.Enum({left:1,right:2});cc.Class({extends:cc.Component,properties:{_side:null,side:{get:function(){return this._side},set:function(e){this._side=e},type:s},player:cc.Node,index:null,targetindex:null},statics:{Side:s},ctor:function(){this.side=null,this.index=0},init:function(e){this.side=.5<Math.random()&&s.left||s.right,this.targetside=this.side,this.isMoving=!1,this.targetindex=e,this.playerFlag=-1,0==e&&(this.playerFlag=e),this.player=this.createPlayerAnimation("resources/answerscene/ren_",2)},createPlayerAnimation:function(e,t){var i=new cc.Node;i.name="NodeTest",i.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.url.raw(e+"1.png")),i.parent=this.player;for(var s=i.addComponent(cc.Animation),n=[],o=0;o<t;o++)n[o]=new cc.SpriteFrame(cc.url.raw(e+(o+1)+".png"));var r=cc.AnimationClip.createWithSpriteFrames(n,t);return r.name="anim_kowtow",r.wrapMode=cc.WrapMode.Loop,r.events.push({frame:1,func:"frameEvent",params:[1,"hello"]}),s.addClip(r),s.play("anim_kowtow"),i},frameEvent:function(e,t){cc.log("磕头磕头磕头磕头磕头磕头磕头磕头磕头"),cc.log(t)}}),cc._RF.pop()},{}],Question:[function(e,t,i){"use strict";cc._RF.push(t,"43c83Dpl3JKeJk9N9VkJXCc","Question"),cc.Class({extends:cc.Component,properties:{paiming:null,all_match_player:null},init:function(){this.myQustion=new Array,this.paiming=0,this.all_match_player=0,this.questions={},this.question_num=0;var n=this;cc.loader.loadRes("tiku.json",function(e,t){if(e)console.log(e);else{n.question_num=t.length;for(var i=0;i<t.length;i++){var s=t[i];n.questions[i]=[],n.questions[i].id=s.id,n.questions[i].question=s.question,n.questions[i].answer=s.answer}}})},findQuestion:function(){var e=Math.floor(Math.random()*this.question_num);cc.log("随机到了第"+e+"道题");var t=[];return t.question=this.questions[e].question,cc.log("题目"+t.question),t.answer=this.questions[e].answer,cc.log("答案"+t.answer),this.myQustion[this.myQustion.length]=[],this.myQustion[this.myQustion.length-1].question=t.question,this.myQustion[this.myQustion.length-1].answer=t.answer,t}}),cc._RF.pop()},{}],SettleScene:[function(e,t,i){"use strict";cc._RF.push(t,"6da2ezZXU9Aa7xKqdkRjnvC","SettleScene");e("Question");cc.Class({extends:cc.Component,properties:{btn_continue:cc.Node,btn_exit:cc.Node,lbl_paiming_info:cc.Label,lbl_dati_info:cc.Label},start:function(){this.lbl_paiming_info.string=_G.QuestionClass.paiming+"/"+_G.QuestionClass.all_match_player,1==_G.QuestionClass.paiming?this.lbl_dati_info.string=_G.QuestionClass.myQustion.length+"道":this.lbl_dati_info.string=_G.QuestionClass.myQustion.length-1+"道",this.btn_continue.on(cc.Node.EventType.TOUCH_START,this.continueClickEvent,this),this.btn_exit.on(cc.Node.EventType.TOUCH_START,this.exitClickEvent,this)},continueClickEvent:function(){cc.director.loadScene("AnswerScene")},exitClickEvent:function(){cc.director.loadScene("MainScene")}}),cc._RF.pop()},{Question:"Question"}],btn_bottom_center:[function(e,t,i){"use strict";cc._RF.push(t,"d29c5Su/VZHuaYickS3oW75","btn_bottom_center"),cc.Class({extends:cc.Component,properties:{button:cc.Button},onLoad:function(){},btnClick:function(e,t){console.log("event=",e.type," data=",t),cc.director.loadScene("AnswerScene")},start:function(){cc.log("启动按钮")}}),cc._RF.pop()},{}],gs_btn:[function(e,t,i){"use strict";cc._RF.push(t,"ced8ftq1yNO+YCk8HCBA0fK","gs_btn"),cc.Class({extends:cc.Component,properties:{button:cc.Button},btnClick:function(e,t){console.log("event=",e.type," data=",t),cc.director.loadScene("MainScene")},start:function(){}}),cc._RF.pop()},{}]},{},["Global","Player","Question","AnswerScene","MainScene","SettleScene","btn_bottom_center","gs_btn"]);
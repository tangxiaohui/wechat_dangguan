{"version":3,"sources":["../../../../../assets/scrips/scene/assets/scrips/scene/AnswerScene.js"],"names":["Player","require","Question","GameState","cc","Enum","PIPEI","ANSWER","JUDGE","REVIVE","END","side_player_max_num","Class","extends","Component","properties","btn_right","Node","btn_wrong","lbl_question_info","Label","lbl_question_title","panel_root","panel_revive","btn_exit","btn_revive","lbl_time","onLoad","find","gameState","judgement","_G","QuestionClass","init","initUI","MySide","Side","left","myPlayerMoving","initPlayer","dead_times","Pipei_time","Answer_time","MyIndex","isMoving","reviveTime","string","active","on","EventType","TOUCH_START","rightClickEvent","wrongClickEvent","Enable_Ads_Sdk","exitviveEvent","reviveEvent","setLocalZOrder","AnswerScene","player_pos_left","Array","player_pos_right","i","v2","Math","floor","left_player_num","right_player_num","match_player_num","player_pos_left_node","player_pos_right_node","PlayerClass","side","addChild","player","index","targetindex","right","random","setPosition","all_match_player","length","BeginGameStatePIPEI","move_time","left_needToRunPlayer","right_needToRunPlayer","callback","unschedule","BEGIN","BeginGameStateBEGIN","last_left_player_num","moveAction","moveTo","delaytime","delayTime","runAction","sequence","last_right_player_num","secendToRunPlayer","schedule","questioninfo","findQuestion","question","Answer_info","answer","QuestionCallback","runOtherPerson","BeginGameStateJUDGE","BeginGameStateREVIVE","reviveCallBack","BeginGameStateEnd","paiming","director","loadScene","judgeCallback","findMyIndex","tempPlayer","removeFromParent","log","playerFlag","other_index","targetside","temp","splice","runNode","runPersionNum_left","j","k","runPersionNum_right","moveTime","self","callFunc","action","x","y"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACA,IAAIE,YAAYC,GAAGC,IAAH,CAAQ;AACpBC,WAAO,CADa;AAEpBC,YAAQ,CAFY;AAGpBC,WAAO,CAHa;AAIpBC,YAAQ,CAJY;AAKpBC,SAAK;AALe,CAAR,CAAhB;AAOA,IAAIC,sBAAsB,EAA1B;;AAEAP,GAAGQ,KAAH,CAAS;AACLC,aAAST,GAAGU,SADP;;AAGLC,gBAAY;AACR;AACAC,mBAAUZ,GAAGa,IAFL;AAGRC,mBAAUd,GAAGa,IAHL;AAIRE,2BAAkBf,GAAGgB,KAJb;AAKRC,4BAAmBjB,GAAGgB,KALd;AAMRE,oBAAWlB,GAAGa,IANN;AAOR;AACAM,sBAAanB,GAAGa,IARR;AASRO,kBAASpB,GAAGa,IATJ;AAURQ,oBAAWrB,GAAGa,IAVN;AAWRS,kBAAStB,GAAGgB;AAXJ,KAHP;;AAiBLO,UAjBK,oBAiBG;AACJ;AACA;AACA;AACA;AACA;AACA,aAAKL,UAAL,GAAkBlB,GAAGwB,IAAH,CAAQ,mBAAR,CAAlB;AACA;AACA,aAAKC,SAAL,GAAiB1B,UAAUG,KAA3B;AACA;AACA;AACA,aAAKwB,SAAL,GAAiB,IAAjB;;AAEAC,WAAGC,aAAH,GAAmB,IAAI9B,QAAJ,EAAnB;AACA6B,WAAGC,aAAH,CAAiBC,IAAjB;;AAEA,aAAKC,MAAL;AACA;AACA,aAAKC,MAAL,GAAcnC,OAAOoC,IAAP,CAAYC,IAA1B;AACA;AACA,aAAKC,cAAL,GAAsB,KAAtB;AACA,aAAKC,UAAL;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACA;AACA,aAAKC,UAAL,GAAkB,CAAlB,CAxBI,CAwBiB;AACrB;AACA,aAAKC,WAAL,GAAmB,CAAnB;AACA;AACA,aAAKC,OAAL,GAAc,CAAd;AACA;AACA,aAAKC,QAAL,GAAgB,KAAhB;;AAGA;AACA,aAAKC,UAAL,GAAkB,CAAlB;AACH,KApDI;;AAqDLX,YAAO,kBAAU;AACb,aAAKf,iBAAL,CAAuB2B,MAAvB,GAAgC,KAAhC;AACA,aAAKzB,kBAAL,CAAwByB,MAAxB,GAAiC,IAAjC;AACA,aAAK9B,SAAL,CAAe+B,MAAf,GAAwB,KAAxB;AACA,aAAK7B,SAAL,CAAe6B,MAAf,GAAwB,KAAxB;AACA,aAAK/B,SAAL,CAAegC,EAAf,CAAkB5C,GAAGa,IAAH,CAAQgC,SAAR,CAAkBC,WAApC,EAAgD,KAAKC,eAArD,EAAqE,IAArE;AACA,aAAKjC,SAAL,CAAe8B,EAAf,CAAkB5C,GAAGa,IAAH,CAAQgC,SAAR,CAAkBC,WAApC,EAAgD,KAAKE,eAArD,EAAqE,IAArE;AACA;AACA,YAAGrB,GAAGsB,cAAH,IAAmB,IAAtB,EACA;AACI,iBAAK7B,QAAL,CAAcwB,EAAd,CAAiB5C,GAAGa,IAAH,CAAQgC,SAAR,CAAkBC,WAAnC,EAA+C,KAAKI,aAApD,EAAkE,IAAlE;AACA,iBAAK7B,UAAL,CAAgBuB,EAAhB,CAAmB5C,GAAGa,IAAH,CAAQgC,SAAR,CAAkBC,WAArC,EAAiD,KAAKK,WAAtD,EAAkE,IAAlE;AACA,iBAAK7B,QAAL,CAAcoB,MAAd,GAAuB,IAAvB;AACA,iBAAKvB,YAAL,CAAkBiC,cAAlB,CAAiC,IAAjC;AACH;AACJ,KApEI;AAqEL;AACAjB,gBAAW,sBAAU;AACjBR,WAAG0B,WAAH,GAAiB,IAAjB;AACA;AACA,aAAKC,eAAL,GAAuB,IAAIC,KAAJ,EAAvB;AACA,aAAKC,gBAAL,GAAwB,IAAID,KAAJ,EAAxB;AACA,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAGlD,sBAAoB,CAAvC,EAA0CkD,GAA1C,EAA+C;AAC3C,iBAAKH,eAAL,CAAqBG,CAArB,IAA0BzD,GAAG0D,EAAH,CAAM,MAAID,IAAE,CAAF,GAAI,GAAd,EAAkB,MAAIE,KAAKC,KAAL,CAAWH,IAAE,CAAb,IAAgB,GAAtC,CAA1B,CAD2C,CAC0B;AACxE;AACD,aAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAIlD,sBAAoB,CAAxC,EAA2CkD,GAA3C,EAAgD;AAC5C,iBAAKD,gBAAL,CAAsBC,CAAtB,IAA2BzD,GAAG0D,EAAH,CAAM,MAAID,IAAE,CAAF,GAAI,GAAd,EAAkB,MAAIE,KAAKC,KAAL,CAAWH,IAAE,CAAb,IAAgB,GAAtC,CAA3B;AACH;AACD;AACA,aAAKI,eAAL,GAAuB,CAAvB;AACA,aAAKC,gBAAL,GAAwB,CAAxB;AACA;AACA,aAAKC,gBAAL,GAAwB,EAAxB,CAfiB,CAeS;AAC1B;AACA,aAAKC,oBAAL,GAA4B,IAAIT,KAAJ,EAA5B;AACA,aAAKU,qBAAL,GAA6B,IAAIV,KAAJ,EAA7B;;AAEA;AACA;;AAEA,aAAK,IAAIE,IAAI,CAAb,EAAeA,IAAE,KAAKM,gBAAtB,EAAuCN,GAAvC,EACA;AACI;AACA,gBAAIS,cAAc,IAAItE,MAAJ,EAAlB;AACA;AACAsE,wBAAYrC,IAAZ,CAAiB4B,CAAjB;AACA,gBAAGA,KAAI,CAAP,EACA;AACI,qBAAK1B,MAAL,GAAcmC,YAAYC,IAA1B;AACA,oBAAG,KAAKpC,MAAL,IAAenC,OAAOoC,IAAP,CAAYC,IAA9B,EACI,KAAKP,SAAL,GAAiB,GAAjB,CADJ,KAEI;AACA,yBAAKA,SAAL,GAAiB,GAAjB;AACH;AACJ;AACD,gBAAG,KAAKmC,eAAL,IAAsBtD,mBAAtB,IAA6C,KAAKuD,gBAAL,IAAuBvD,mBAAvE,EACA;AACI,qBAAKwD,gBAAL,GAAwBN,CAAxB;AACA;AACH;AACD,gBAAGS,YAAYC,IAAZ,IAAoBvE,OAAOoC,IAAP,CAAYC,IAAnC,EACA;AACI,qBAAK+B,oBAAL,CAA0B,KAAKH,eAA/B,IAAkDK,WAAlD;AACA,qBAAKhD,UAAL,CAAgBkD,QAAhB,CAAyBF,YAAYG,MAArC;AACAH,4BAAYG,MAAZ,CAAmBjB,cAAnB,CAAmC,OAAM,KAAKS,eAA9C;AACAK,4BAAYI,KAAZ,GAAoB,KAAKT,eAAzB;AACAK,4BAAYK,WAAZ,GAA0B,KAAKV,eAA/B;AACA;AACA,qBAAKA,eAAL;AACH,aATD,MAUK,IAAGK,YAAYC,IAAZ,IAAoBvE,OAAOoC,IAAP,CAAYwC,KAAnC,EAAyC;AAC1C,qBAAKP,qBAAL,CAA2B,KAAKH,gBAAhC,IAAoDI,WAApD;AACA,qBAAKhD,UAAL,CAAgBkD,QAAhB,CAAyBF,YAAYG,MAArC;AACAH,4BAAYG,MAAZ,CAAmBjB,cAAnB,CAAmC,OAAM,KAAKU,gBAA9C;AACAI,4BAAYI,KAAZ,GAAoB,KAAKR,gBAAzB;AACAI,4BAAYK,WAAZ,GAA0B,KAAKT,gBAA/B;AACA;AACA,qBAAKA,gBAAL;AACH;AACD;AACA,gBAAIW,SAASd,KAAKc,MAAL,KAAe,GAAf,IAAsB7E,OAAOoC,IAAP,CAAYC,IAAlC,IAA0CrC,OAAOoC,IAAP,CAAYwC,KAAnE;AACA,gBAAIC,UAAU7E,OAAOoC,IAAP,CAAYC,IAA1B,EAA+B;AAC3BiC,4BAAYG,MAAZ,CAAmBK,WAAnB,CAA+B1E,GAAG0D,EAAH,CAAM,CAAC,GAAP,EAAW,IAAX,CAA/B;AACH,aAFD,MAGI;AACAQ,4BAAYG,MAAZ,CAAmBK,WAAnB,CAA+B1E,GAAG0D,EAAH,CAAM,GAAN,EAAU,IAAV,CAA/B;AACH;AACJ;AACD/B,WAAGC,aAAH,CAAiB+C,gBAAjB,GAAoC,KAAKX,oBAAL,CAA0BY,MAA1B,GAAmC,KAAKX,qBAAL,CAA2BW,MAAlG;AACA;AACA,aAAKC,mBAAL;AACH,KAhJI;AAiJL;AACAA,yBAAoB,+BACpB;AACI,aAAKC,SAAL,GAAiB,GAAjB;AACA;AACA,YAAIC,uBAAuB,CAA3B;AACA,YAAIC,wBAAwB,CAA5B;AACA,aAAKC,QAAL,GAAgB,YAAW;AACvB,gBAAG,KAAK5C,UAAL,IAAmB,CAAtB,EACA;AACI,qBAAK6C,UAAL,CAAgB,KAAKD,QAArB;AACA;AACA,qBAAKxD,SAAL,GAAiB1B,UAAUoF,KAA3B;AACA;AACA,qBAAKC,mBAAL;AACH;AACD,iBAAKnE,kBAAL,CAAwByB,MAAxB,GAAkC,KAAKL,UAAvC;AACA,gBAAG,KAAKA,UAAL,IAAmB,CAAtB,EAAwB;AACxB;AACI;AACA,wBAAIgD,uBAAuB,KAAKxB,eAAL,GAAuBkB,oBAAlD;AACA,yBAAK,IAAItB,IAAI,CAAb,EAAgBA,IAAG4B,oBAAnB,EAAyC5B,GAAzC,EAA8C;AAC1C,4BAAI6B,aAAatF,GAAGuF,MAAH,CAAU,KAAKT,SAAf,EAAyB,KAAKxB,eAAL,CAAqByB,uBAAqBtB,CAA1C,CAAzB,CAAjB;AACA,4BAAI+B,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,EAAb,CAAhB;AACA,6BAAKT,oBAAL,CAA0Be,uBAAqBtB,CAA/C,EAAkDY,MAAlD,CAAyDqB,SAAzD,CAAmE1F,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBF,UAAtB,CAAnE;AACH;AACD,wBAAIM,wBAAwB,KAAK9B,gBAAL,GAAwBkB,qBAApD;AACA,yBAAK,IAAIvB,IAAI,CAAb,EAAgBA,IAAGmC,qBAAnB,EAA0CnC,GAA1C,EAA+C;AAC3C,4BAAI6B,aAAatF,GAAGuF,MAAH,CAAU,KAAKT,SAAf,EAAyB,KAAKtB,gBAAL,CAAsBwB,wBAAsBvB,CAA5C,CAAzB,CAAjB;AACA,4BAAI+B,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,EAAb,CAAhB;AACA,6BAAKR,qBAAL,CAA2Be,wBAAsBvB,CAAjD,EAAoDY,MAApD,CAA2DqB,SAA3D,CAAqE1F,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBF,UAAtB,CAArE;AACH;AACD;AACH,iBAhBD,MAiBK,IAAG,KAAKjD,UAAL,GAAiB,CAAjB,IAAsB,KAAKA,UAAL,GAAgB,CAAzC,EACL,CAEC,CAHI,MAID;AACA;AACA,oBAAIwD,oBAAoB,CAAC,KAAKxD,UAAL,GAAiB,CAAlB,KAAwB,CAAC,KAAKA,UAAL,GAAgB,CAAjB,KAAqB,KAAKA,UAAL,GAAgB,CAArC,IAAwC,CAAhE,IAAoE,KAAKwB,eAAjG;AACA,qBAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAGE,KAAKC,KAAL,CAAWiC,iBAAX,CAAnB,EAAkDpC,GAAlD,EAAuD;AACnD,wBAAI6B,aAAatF,GAAGuF,MAAH,CAAU,KAAKT,SAAf,EAAyB,KAAKxB,eAAL,CAAqByB,uBAAqBtB,CAA1C,CAAzB,CAAjB;AACA,wBAAI+B,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,EAAb,CAAhB;AACA,yBAAKT,oBAAL,CAA0Be,uBAAqBtB,CAA/C,EAAkDY,MAAlD,CAAyDqB,SAAzD,CAAmE1F,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBF,UAAtB,CAAnE;AACH;AACDP,uCAAuBA,uBAAqBpB,KAAKC,KAAL,CAAWiC,iBAAX,CAA5C;AACA;AACA,oBAAIA,oBAAqB,CAAC,KAAKxD,UAAL,GAAiB,CAAlB,IAAsB,EAAtB,GAA2B,KAAKyB,gBAAzD;AACA,qBAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAGE,KAAKC,KAAL,CAAWiC,iBAAX,CAAnB,EAAkDpC,GAAlD,EAAuD;AACnD,wBAAI6B,aAAatF,GAAGuF,MAAH,CAAU,KAAKT,SAAf,EAAyB,KAAKtB,gBAAL,CAAsBwB,wBAAsBvB,CAA5C,CAAzB,CAAjB;AACA,wBAAI+B,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,EAAb,CAAhB;AACA,yBAAKR,qBAAL,CAA2Be,wBAAsBvB,CAAjD,EAAoDY,MAApD,CAA2DqB,SAA3D,CAAqE1F,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBF,UAAtB,CAArE;AACH;AACDN,wCAAwBA,wBAAsBrB,KAAKC,KAAL,CAAWiC,iBAAX,CAA9C;AACH;AACD,iBAAKxD,UAAL;AACF,SAlDF;;AAoDA,aAAKyD,QAAL,CAAc,KAAKb,QAAnB,EAA4B,CAA5B;AACH,KA7MI;AA8ML;AACAG,yBAAoB,+BACpB;AACI,aAAKtE,SAAL,CAAe6B,MAAf,GAAwB,IAAxB;AACA,aAAK/B,SAAL,CAAe+B,MAAf,GAAwB,IAAxB;AACA;AACA,YAAIL,cAAc,KAAKA,WAAvB;AACA;AACA,YAAIyD,eAAepE,GAAGC,aAAH,CAAiBoE,YAAjB,EAAnB;AACA,aAAK/E,kBAAL,CAAwByB,MAAxB,GAAiCJ,WAAjC;;AAEA,aAAKvB,iBAAL,CAAuB2B,MAAvB,GAAgCqD,aAAaE,QAA7C;AACA,aAAKC,WAAL,GAAmBH,aAAaI,MAAhC;AACA,aAAKC,gBAAL,GAAwB,YAAU;AAC9B,gBAAG9D,eAAe,KAAKA,WAAL,GAAmB,CAArC,EAAuC;AACnC,oBAAG,KAAKJ,cAAL,IAAuB,KAAvB,IAAgCI,cAAY,CAA/C,EACA;AACI,yBAAK+D,cAAL;AACH;AACD,oBAAI/D,eAAc,CAAlB,EACA;AACI,yBAAK4C,UAAL,CAAgB,KAAKkB,gBAArB;AACA,yBAAK3E,SAAL,GAAiB1B,UAAUK,KAA3B;AACA;AACA,yBAAKkG,mBAAL;AACH;AACD,qBAAKrF,kBAAL,CAAwByB,MAAxB,GAAiCJ,WAAjC;AACA;AACA;AACA;;AAEA;AACH;AACDA;AACH,SArBD;AAsBA,aAAKwD,QAAL,CAAc,KAAKM,gBAAnB,EAAoC,CAApC;AACH,KAlPI;AAmPL;AACAG,0BAAqB,gCACrB;AACI,aAAKC,cAAL,GAAsB,YAAU;AAC5B,iBAAKlF,QAAL,CAAcoB,MAAd,GAAuB,KAAKD,UAA5B;AACA,gBAAG,KAAKA,UAAL,IAAiB,CAApB,EAAsB;AAClB,qBAAKtB,YAAL,CAAkBwB,MAAlB,GAA2B,KAA3B;AACA,qBAAK8D,iBAAL;AACA,qBAAKvB,UAAL,CAAgB,KAAKsB,cAArB;AACH;AACD,iBAAK/D,UAAL;AACH,SARD;AASA,aAAKqD,QAAL,CAAc,KAAKU,cAAnB,EAAkC,CAAlC;AACH,KAhQI;AAiQLtD,mBAAc,yBACd;AACI,aAAKgC,UAAL,CAAgB,KAAKsB,cAArB;AACA,aAAKrF,YAAL,CAAkBwB,MAAlB,GAA2B,KAA3B;AACA,aAAK8D,iBAAL;AACH,KAtQI;AAuQLtD,iBAAY,uBACZ;AACI;AACA;AACA;AACA;AACA,aAAKhC,YAAL,CAAkBwB,MAAlB,GAA2B,KAA3B;AACA,aAAKyC,mBAAL;AACH,KA/QI;AAgRL;AACAqB,uBAAkB,6BAClB;AACI;AACA,YAAG,KAAKzC,oBAAL,CAA0BY,MAA1B,GAAmC,KAAKX,qBAAL,CAA2BW,MAA9D,IAAuE,CAA1E,EAA4E;AACxEjD,eAAGC,aAAH,CAAiB8E,OAAjB,GAA2B,CAA3B;AACH,SAFD,MAGI;AACA/E,eAAGC,aAAH,CAAiB8E,OAAjB,GAA2B,KAAK1C,oBAAL,CAA0BY,MAA1B,GAAmC,KAAKX,qBAAL,CAA2BW,MAAzF;AACH;AACD;AACA5E,WAAG2G,QAAH,CAAYC,SAAZ,CAAsB,aAAtB;AACH,KA5RI;AA6RL;AACAN,yBAAoB,+BACpB;AACI,aAAKxF,SAAL,CAAe6B,MAAf,GAAwB,KAAxB;AACA,aAAK/B,SAAL,CAAe+B,MAAf,GAAwB,KAAxB;;AAIA;AACA,aAAKkE,aAAL,GAAqB,YAAU;AAC3B;AACA,iBAAK3B,UAAL,CAAgB,KAAK2B,aAArB;;AAEA,gBAAG,KAAK9E,MAAL,IAAenC,OAAOoC,IAAP,CAAYC,IAA9B,EAAmC;AAC/B,qBAAKM,OAAL,GAAe,KAAKuE,WAAL,CAAiBlH,OAAOoC,IAAP,CAAYC,IAA7B,CAAf;AACA,qBAAK8E,UAAL,GAAkB,KAAK/C,oBAAL,CAA0B,KAAKzB,OAA/B,CAAlB;AACH,aAHD,MAIK,IAAG,KAAKR,MAAL,IAAenC,OAAOoC,IAAP,CAAYwC,KAA9B,EACL;AACI,qBAAKjC,OAAL,GAAe,KAAKuE,WAAL,CAAiBlH,OAAOoC,IAAP,CAAYwC,KAA7B,CAAf;AACA,qBAAKuC,UAAL,GAAkB,KAAK9C,qBAAL,CAA2B,KAAK1B,OAAhC,CAAlB;AACH;AACD;AACA,gBAAG,KAAK2D,WAAL,IAAoB,GAAvB,EAA2B;AAC3B;AACI,yBAAK,IAAIzC,IAAI,CAAb,EAAgBA,IAAG,KAAKQ,qBAAL,CAA2BW,MAA9C,EAAsDnB,GAAtD,EAA2D;AACvD,6BAAKQ,qBAAL,CAA2BR,CAA3B,EAA8BY,MAA9B,CAAqC2C,gBAArC;AACH;AACD,yBAAK/C,qBAAL,GAA6B,IAAIV,KAAJ,EAA7B;AACA,yBAAKO,gBAAL,GAAwB,CAAxB;AACH,iBAPD,MAQK,IAAG,KAAKoC,WAAL,IAAoB,GAAvB,EACL;AACI,qBAAK,IAAIzC,IAAI,CAAb,EAAgBA,IAAG,KAAKO,oBAAL,CAA0BY,MAA7C,EAAqDnB,GAArD,EAA0D;AACtD,yBAAKO,oBAAL,CAA0BP,CAA1B,EAA6BY,MAA7B,CAAoC2C,gBAApC;AACH;AACD,qBAAKhD,oBAAL,GAA4B,IAAIT,KAAJ,EAA5B;AACA,qBAAKM,eAAL,GAAuB,CAAvB;AAEH;AACD,gBAAG,KAAKnC,SAAL,IAAkB,KAAKwE,WAA1B,EACA;AACI;AACA,oBAAG,KAAKlC,oBAAL,CAA0BY,MAA1B,GAAmC,KAAKX,qBAAL,CAA2BW,MAA9D,IAAwE,CAA3E,EACA;AACI5E,uBAAGiH,GAAH,CAAO,QAAP;AACA;AACA,yBAAKR,iBAAL;AACH,iBALD,MAOA;AACIzG,uBAAGiH,GAAH,CAAO,iBAAP;AACA;AACA,yBAAK7B,mBAAL;AACH;AACJ,aAfD,MAiBA;AACI,qBAAKhD,UAAL;AACA,oBAAIT,GAAGsB,cAAH,IAAmB,IAAnB,IAA2B,KAAKb,UAAL,IAAiB,CAA7C,IAAmDT,GAAGsB,cAAH,IAAqB,KAA3E,EACA;AACIjD,uBAAGiH,GAAH,CAAO,aAAP;AACA;AACA,yBAAKR,iBAAL;AACH,iBALD,MAOA;AACIzG,uBAAGiH,GAAH,CAAO,SAAP;AACA;AACA,yBAAK9F,YAAL,CAAkBwB,MAAlB,GAA2B,IAA3B;AACA,yBAAK4D,oBAAL;AACH;AACJ;AACJ,SAhED;AAiEA,aAAKT,QAAL,CAAc,KAAKe,aAAnB,EAAiC,CAAjC,EAAmC,CAAnC;AACH,KAxWI;AAyWL;AACAC,iBAAY,qBAAS3C,IAAT,EACZ;AACI,YAAGA,QAAQvE,OAAOoC,IAAP,CAAYwC,KAAvB,EACA;AACI,iBAAK,IAAIf,IAAI,CAAb,EAAgBA,IAAI,KAAKQ,qBAAL,CAA2BW,MAA/C,EAAuDnB,GAAvD,EAA4D;AACxD,oBAAG,KAAKQ,qBAAL,CAA2BR,CAA3B,EAA8ByD,UAA9B,IAA4C,CAA/C,EACA;AACI,2BAAOzD,CAAP;AACH;AACJ;AACJ,SARD,MAUA;AACI,iBAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAI,KAAKO,oBAAL,CAA0BY,MAA9C,EAAsDnB,GAAtD,EAA2D;AACvD,oBAAG,KAAKO,oBAAL,CAA0BP,CAA1B,EAA6ByD,UAA7B,IAA2C,CAA9C,EACA;AACI,2BAAOzD,CAAP;AACH;AACJ;AACJ;AACJ,KA9XI;AA+XL;AACAV,qBAAgB,2BAAU;AACtB;AACA,aAAKrB,SAAL,GAAiB,GAAjB;;AAEA,YAAG,KAAKK,MAAL,IAAenC,OAAOoC,IAAP,CAAYwC,KAA9B,EACA;AACI,iBAAKtC,cAAL,GAAsB,IAAtB;AACA;AACA,gBAAIoC,QAAQ,KAAKwC,WAAL,CAAiBlH,OAAOoC,IAAP,CAAYwC,KAA7B,CAAZ;AACA;AACA;AACI,iBAAKP,qBAAL,CAA2BK,KAA3B,EAAkCH,IAAlC,GAAyCvE,OAAOoC,IAAP,CAAYC,IAArD;AACA;AACA;AACA,gBAAIkF,WAAJ,CATR,CASwB;AAChB;AACA,gBAAG,KAAKnD,oBAAL,CAA0BY,MAA1B,IAAkC,CAArC,EACA;AACIuC,8BAAc,CAAd;AACA,qBAAKlD,qBAAL,CAA2BK,KAA3B,EAAkCC,WAAlC,GAAgD4C,WAAhD;AACA,qBAAKlD,qBAAL,CAA2BK,KAA3B,EAAkC8C,UAAlC,GAA+CxH,OAAOoC,IAAP,CAAYC,IAA3D;AACI;AACJ,oBAAIoF,OAAO,KAAKpD,qBAAL,CAA2BK,KAA3B,CAAX;AACA,qBAAKL,qBAAL,CAA2BqD,MAA3B,CAAkChD,KAAlC,EAAwC,CAAxC,EANJ,CAM+C;AAC3C;AACA;AACA,qBAAKN,oBAAL,CAA0BsD,MAA1B,CAAiCH,WAAjC,EAA6C,CAA7C,EAA+CE,IAA/C,EATJ,CASyD;AACrD;AACA,qBAAKE,OAAL,CAAaJ,WAAb,EAAyBvH,OAAOoC,IAAP,CAAYC,IAArC;AACA;AACA,oBAAG,KAAKgC,qBAAL,CAA2BW,MAA3B,IAAoC,CAAvC,EACA;AACI,yBAAKX,qBAAL,CAA2B,KAAKA,qBAAL,CAA2BW,MAA3B,GAAkC,CAA7D,EAAgEL,WAAhE,GAA8ED,KAA9E;AACA,wBAAI+C,OAAO,KAAKpD,qBAAL,CAA2B,KAAKA,qBAAL,CAA2BW,MAA3B,GAAkC,CAA7D,CAAX;AACA,yBAAKX,qBAAL,CAA2BqD,MAA3B,CAAkC,KAAKrD,qBAAL,CAA2BW,MAA3B,GAAkC,CAApE,EAAsE,CAAtE;AACA,yBAAKX,qBAAL,CAA2BqD,MAA3B,CAAkChD,KAAlC,EAAwC,CAAxC,EAA0C+C,IAA1C;;AAEA,yBAAKE,OAAL,CAAajD,KAAb,EAAmB1E,OAAOoC,IAAP,CAAYwC,KAA/B;AACH;AACJ,aAvBD,MAyBA;AACI,oBAAI,KAAKP,qBAAL,CAA2BW,MAA3B,IAAmC,CAAvC,EAAyC;AACrCuC,kCAAcxD,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,IAAf,IAAqB,KAAKX,gBAArC,CAAd;AACH,iBAFD,MAGI;AACAqD,kCAAcxD,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,IAAf,IAAqB,CAAhC,CAAd;AACH;AACD,qBAAKR,qBAAL,CAA2BK,KAA3B,EAAkCC,WAAlC,GAAgD4C,WAAhD;AACA;AACA,oBAAIE,OAAO,KAAKpD,qBAAL,CAA2BK,KAA3B,CAAX;AACA,qBAAKL,qBAAL,CAA2BqD,MAA3B,CAAkChD,KAAlC,EAAwC,CAAxC,EAVJ,CAU+C;AAC3C,qBAAKL,qBAAL,CAA2BqD,MAA3B,CAAkChD,KAAlC,EAAwC,CAAxC,EAA0C,KAAKN,oBAAL,CAA0BmD,WAA1B,CAA1C,EAXJ,CAWsF;AAClF,qBAAKnD,oBAAL,CAA0BsD,MAA1B,CAAiCH,WAAjC,EAA6C,CAA7C;AACA,qBAAKnD,oBAAL,CAA0BsD,MAA1B,CAAiCH,WAAjC,EAA6C,CAA7C,EAA+CE,IAA/C,EAbJ,CAayD;;AAErD,qBAAKE,OAAL,CAAaJ,WAAb,EAAyBvH,OAAOoC,IAAP,CAAYC,IAArC;AACA,qBAAKsF,OAAL,CAAajD,KAAb,EAAmB1E,OAAOoC,IAAP,CAAYwC,KAA/B;AACH;;AAID,iBAAKX,eAAL,GAAsB,KAAKG,oBAAL,CAA0BY,MAAhD;AACA,iBAAKd,gBAAL,GAAwB,KAAKG,qBAAL,CAA2BW,MAAnD;;AAEA,iBAAK7C,MAAL,GAAcnC,OAAOoC,IAAP,CAAYC,IAA1B;AACA,iBAAKM,OAAL,GAAe4E,WAAf;AACA,iBAAKjF,cAAL,GAAsB,KAAtB;AACJ;AAEH;AACJ,KAvcI;AAwcL;AACAc,qBAAgB,2BAAU;AACtB;AACA,aAAKtB,SAAL,GAAiB,GAAjB;AACA,YAAG,KAAKK,MAAL,IAAenC,OAAOoC,IAAP,CAAYC,IAA9B,EACA;;AAEI,iBAAKC,cAAL,GAAsB,IAAtB;AACA;AACA,gBAAIoC,QAAQ,KAAKwC,WAAL,CAAiBlH,OAAOoC,IAAP,CAAYC,IAA7B,CAAZ;AACA;AACA;AACI,iBAAK+B,oBAAL,CAA0BM,KAA1B,EAAiCH,IAAjC,GAAwCvE,OAAOoC,IAAP,CAAYwC,KAApD;AACA;AACA;AACA,gBAAI2C,WAAJ,CAVR,CAUwB;AAChB;AACA,gBAAG,KAAKlD,qBAAL,CAA2BW,MAA3B,IAAmC,CAAtC,EACA;AACIuC,8BAAc,CAAd;AACA,qBAAKnD,oBAAL,CAA0BM,KAA1B,EAAiCC,WAAjC,GAA+C4C,WAA/C;AACA,qBAAKnD,oBAAL,CAA0BM,KAA1B,EAAiC8C,UAAjC,GAA8CxH,OAAOoC,IAAP,CAAYwC,KAA1D;AACI;AACJ,oBAAI6C,OAAO,KAAKrD,oBAAL,CAA0BM,KAA1B,CAAX;AACA,qBAAKN,oBAAL,CAA0BsD,MAA1B,CAAiChD,KAAjC,EAAuC,CAAvC,EANJ,CAM8C;AAC1C;AACA;AACA,qBAAKL,qBAAL,CAA2BqD,MAA3B,CAAkCH,WAAlC,EAA8C,CAA9C,EAAgDE,IAAhD,EATJ,CAS0D;AACtD;AACA,qBAAKE,OAAL,CAAaJ,WAAb,EAAyBvH,OAAOoC,IAAP,CAAYwC,KAArC;AACA;AACA,oBAAG,KAAKR,oBAAL,CAA0BY,MAA1B,IAAoC,CAAvC,EACA;AACI,yBAAKZ,oBAAL,CAA0B,KAAKA,oBAAL,CAA0BY,MAA1B,GAAiC,CAA3D,EAA8DL,WAA9D,GAA4ED,KAA5E;AACA,wBAAI+C,OAAO,KAAKrD,oBAAL,CAA0B,KAAKA,oBAAL,CAA0BY,MAA1B,GAAiC,CAA3D,CAAX;AACA,yBAAKZ,oBAAL,CAA0BsD,MAA1B,CAAiC,KAAKtD,oBAAL,CAA0BY,MAA1B,GAAiC,CAAlE,EAAoE,CAApE;AACA,yBAAKZ,oBAAL,CAA0BsD,MAA1B,CAAiChD,KAAjC,EAAuC,CAAvC,EAAyC+C,IAAzC;;AAEA,yBAAKE,OAAL,CAAajD,KAAb,EAAmB1E,OAAOoC,IAAP,CAAYC,IAA/B;AACH;AACJ,aAvBD,MAyBA;AACI,oBAAI,KAAKgC,qBAAL,CAA2BW,MAA3B,IAAmC,CAAvC,EAAyC;AACrCuC,kCAAcxD,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,IAAf,IAAqB,KAAKX,gBAArC,CAAd;AACH,iBAFD,MAGI;AACAqD,kCAAcxD,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,IAAf,IAAqB,CAAhC,CAAd;AACH;AACD,qBAAKT,oBAAL,CAA0BM,KAA1B,EAAiCC,WAAjC,GAA+C4C,WAA/C;AACA;AACA,oBAAIE,OAAO,KAAKrD,oBAAL,CAA0BM,KAA1B,CAAX;AACA,qBAAKN,oBAAL,CAA0BsD,MAA1B,CAAiChD,KAAjC,EAAuC,CAAvC,EAVJ,CAU8C;AAC1C,qBAAKN,oBAAL,CAA0BsD,MAA1B,CAAiChD,KAAjC,EAAuC,CAAvC,EAAyC,KAAKL,qBAAL,CAA2BkD,WAA3B,CAAzC,EAXJ,CAWsF;AAClF,qBAAKlD,qBAAL,CAA2BqD,MAA3B,CAAkCH,WAAlC,EAA8C,CAA9C;AACA,qBAAKlD,qBAAL,CAA2BqD,MAA3B,CAAkCH,WAAlC,EAA8C,CAA9C,EAAgDE,IAAhD,EAbJ,CAa0D;;AAEtD,qBAAKE,OAAL,CAAajD,KAAb,EAAmB1E,OAAOoC,IAAP,CAAYC,IAA/B;AACA,qBAAKsF,OAAL,CAAaJ,WAAb,EAAyBvH,OAAOoC,IAAP,CAAYwC,KAArC;AACH;AACD,iBAAKX,eAAL,GAAsB,KAAKG,oBAAL,CAA0BY,MAAhD;AACA,iBAAKd,gBAAL,GAAwB,KAAKG,qBAAL,CAA2BW,MAAnD;;AAEA,iBAAK7C,MAAL,GAAcnC,OAAOoC,IAAP,CAAYwC,KAA1B;AACA,iBAAKjC,OAAL,GAAe4E,WAAf;;AAEA,iBAAKjF,cAAL,GAAsB,KAAtB;AACJ;AACH;AACJ,KA7gBI;AA8gBL;AACA;AACAmE,oBAAe,0BAAU;AACrB;AACA;AACArG,WAAGiH,GAAH,CAAO,UAAQ,KAAKpD,eAApB;AACA7D,WAAGiH,GAAH,CAAO,UAAQ,KAAKnD,gBAApB;AACA,YAAI0D,kBAAJ;AACA,YAAG,KAAKxD,oBAAL,CAA0BY,MAA1B,IAAoC,CAAvC,EACA;AACI4C,iCAAoB,CAApB;AACH,SAHD,MAII;AACAA,iCAAsB7D,KAAKC,KAAL,CAAWD,KAAKc,MAAL,KAAgB,CAA3B,CAAtB,CADA,CACqD;AACrD,gBAAI+C,qBAAmB,KAAK3D,eAA5B,EACA;AACI2D,qCAAqB,KAAK3D,eAA1B;AACH,aAHD,MAIK,IAAG2D,qBAAqB,KAAK1D,gBAA1B,GAA4C,EAA/C,EACL;AACI0D,qCAAqBA,sBAAsBA,qBAAqB,KAAK1D,gBAA1B,GAA4C,EAAlE,CAArB;AACH;AACJ;AACD9D,WAAGiH,GAAH,CAAO,uBAAqBO,kBAA5B;AACA,aAAK,IAAI/D,KAAI,CAAb,EAAgBA,KAAI+D,kBAApB,EAAwC/D,IAAxC,EAA6C;AACzC;AACA,gBAAIa,QAAQX,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,KAAf,IAAuB,KAAKT,oBAAL,CAA0BY,MAA5D,CAAZ;AACA;AACA,gBAAGN,SAAS,KAAKN,oBAAL,CAA0BY,MAAtC,EACA;AACI;AACH;AACD,gBAAG,KAAKZ,oBAAL,CAA0BM,KAA1B,EAAiC4C,UAAjC,IAA+C,CAAlD,EACA;AACI;AACH;AACD;AACA;AACI,iBAAKlD,oBAAL,CAA0BM,KAA1B,EAAiC8C,UAAjC,GAA8CxH,OAAOoC,IAAP,CAAYwC,KAA1D;AACAxE,eAAGiH,GAAH,CAAO,aAAa3C,KAApB;AACA;AACA;AACA,gBAAI6C,cAAcxD,KAAKC,KAAL,CAAW,CAACD,KAAKc,MAAL,KAAc,KAAf,IAAuB,KAAKR,qBAAL,CAA2BW,MAA7D,CAAlB;AACA,iBAAKZ,oBAAL,CAA0BM,KAA1B,EAAiCC,WAAjC,GAA+C4C,WAA/C;AACAnH,eAAGiH,GAAH,CAAO,aAAaE,WAApB;;AAEA,iBAAKlD,qBAAL,CAA2BqD,MAA3B,CAAkCH,WAAlC,EAA8C,CAA9C,EAAgD,KAAKnD,oBAAL,CAA0BM,KAA1B,CAAhD,EAtBqC,CAsB6C;AAClF,iBAAKN,oBAAL,CAA0BsD,MAA1B,CAAiChD,KAAjC,EAAuC,CAAvC,EAvBqC,CAuBK;AAC1C;AACA,iBAAK,IAAImD,IAAIN,cAAY,CAAzB,EAA4BM,IAAI,KAAKxD,qBAAL,CAA2BW,MAA3D,EAAmE6C,GAAnE,EAAwE;AACpE,qBAAKxD,qBAAL,CAA2BwD,CAA3B,EAA8BlD,WAA9B,GAA4CkD,CAA5C;AACH;AACD,iBAAK,IAAIC,IAAIpD,KAAb,EAAoBoD,IAAE,KAAK1D,oBAAL,CAA0BY,MAAhD,EAAuD8C,GAAvD,EACA;AACI,qBAAK1D,oBAAL,CAA0B0D,CAA1B,EAA6BnD,WAA7B,GAA2CmD,CAA3C;AACH;AACD;AACA,iBAAK7D,eAAL;AACA,iBAAKC,gBAAL;AACJ;AACH;;AAED,YAAI6D,mBAAJ;AACA,YAAG,KAAK1D,qBAAL,CAA2BW,MAA3B,IAAqC,CAAxC,EACA;AACI+C,kCAAqB,CAArB;AACH,SAHD,MAII;AACAA,kCAAsBhE,KAAKC,KAAL,CAAWD,KAAKc,MAAL,KAAc,CAAzB,CAAtB;AACA,gBAAIkD,sBAAoB,KAAK7D,gBAA7B,EACA;AACI6D,sCAAsB,KAAK7D,gBAA3B;AACH,aAHD,MAIK,IAAG6D,sBAAsB,KAAK9D,eAA3B,GAA4C,EAA/C,EACL;AACI8D,sCAAsBA,uBAAuBA,sBAAsB,KAAK9D,eAA3B,GAA4C,EAAnE,CAAtB;AACH;AACJ;AACD7D,WAAGiH,GAAH,CAAO,wBAAsBU,mBAA7B;AACA,aAAK,IAAIlE,MAAI,CAAb,EAAgBA,MAAIkE,mBAApB,EAAyClE,KAAzC,EAA8C;AAC1C,gBAAIa,QAAQX,KAAKC,KAAL,CAAW,IAAE,CAACD,KAAKc,MAAL,KAAc,KAAf,KAAuB,KAAKR,qBAAL,CAA2BW,MAA3B,GAAkC,CAAzD,CAAb,CAAZ;AACA,gBAAGN,SAAS,KAAKL,qBAAL,CAA2BW,MAAvC,EACA;AACI;AACH;AACD,gBAAG,KAAKX,qBAAL,CAA2BK,KAA3B,EAAkC4C,UAAlC,IAAgD,CAAnD,EACA;AACI;AACH;AACD;AACA;AACI,iBAAKjD,qBAAL,CAA2BK,KAA3B,EAAkC8C,UAAlC,GAA+CxH,OAAOoC,IAAP,CAAYC,IAA3D;;AAEAjC,eAAGiH,GAAH,CAAO,aAAa3C,KAApB;AACA;AACA,gBAAI6C,cAAcxD,KAAKC,KAAL,CAAW,IAAE,CAACD,KAAKc,MAAL,KAAc,KAAf,KAAuB,KAAKT,oBAAL,CAA0BY,MAA1B,GAAiC,CAAxD,CAAb,CAAlB;AACA,iBAAKX,qBAAL,CAA2BK,KAA3B,EAAkCC,WAAlC,GAAgD4C,WAAhD;;AAEAnH,eAAGiH,GAAH,CAAO,aAAaE,WAApB;;AAEA,iBAAKnD,oBAAL,CAA0BsD,MAA1B,CAAiCH,WAAjC,EAA6C,CAA7C,EAA+C,KAAKlD,qBAAL,CAA2BK,KAA3B,CAA/C,EArBsC,CAqB4C;AAClF,iBAAKL,qBAAL,CAA2BqD,MAA3B,CAAkChD,KAAlC,EAAwC,CAAxC,EAtBsC,CAsBK;AAC3C;AACA,iBAAK,IAAImD,IAAIN,cAAY,CAAzB,EAA4BM,IAAI,KAAKzD,oBAAL,CAA0BY,MAA1D,EAAkE6C,GAAlE,EAAuE;AACnE,qBAAKzD,oBAAL,CAA0ByD,CAA1B,EAA6BlD,WAA7B,GAA2CkD,CAA3C;AACH;AACD,iBAAK,IAAIC,IAAIpD,KAAb,EAAoBoD,IAAE,KAAKzD,qBAAL,CAA2BW,MAAjD,EAAwD8C,GAAxD,EACA;AACI,qBAAKzD,qBAAL,CAA2ByD,CAA3B,EAA8BnD,WAA9B,GAA4CmD,CAA5C;AACH;AACD;AACA,iBAAK5D,gBAAL;AACA,iBAAKD,eAAL;AACJ;AACH;AACD,aAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAI,KAAKO,oBAAL,CAA0BY,MAA9C,EAAsDnB,GAAtD,EAA2D;AACvD,gBAAG,KAAKO,oBAAL,CAA0BP,CAA1B,EAA6Bc,WAA7B,IAA4C,KAAKP,oBAAL,CAA0BP,CAA1B,EAA6Ba,KAAzE,IACH,KAAKN,oBAAL,CAA0BP,CAA1B,EAA6B2D,UAA7B,IAA2C,KAAKpD,oBAAL,CAA0BP,CAA1B,EAA6BU,IADxE,EAC6E;AAC7E;AACInE,uBAAGiH,GAAH,CAAO,UAAQ,KAAKjD,oBAAL,CAA0BP,CAA1B,EAA6BU,IAArC,GAA4C,cAA5C,GAA4D,KAAKH,oBAAL,CAA0BP,CAA1B,EAA6B2D,UAAzF,GAAqG,KAArG,GAA2G3D,CAA3G,GAA+G,OAA/G,GAAwH,KAAKO,oBAAL,CAA0BP,CAA1B,EAA6Ba,KAArJ,GAA6J,MAA7J,GAAsK,KAAKN,oBAAL,CAA0BP,CAA1B,EAA6Bc,WAA1M;AACA,yBAAKgD,OAAL,CAAa9D,CAAb,EAAe,KAAKO,oBAAL,CAA0BP,CAA1B,EAA6B2D,UAA5C;AACH;AACJ;AACD,aAAK,IAAI3D,IAAI,CAAb,EAAgBA,IAAI,KAAKQ,qBAAL,CAA2BW,MAA/C,EAAuDnB,GAAvD,EAA4D;AACxD,gBAAG,KAAKQ,qBAAL,CAA2BR,CAA3B,EAA8Bc,WAA9B,IAA6C,KAAKN,qBAAL,CAA2BR,CAA3B,EAA8Ba,KAA3E,IACH,KAAKL,qBAAL,CAA2BR,CAA3B,EAA8B2D,UAA9B,IAA4C,KAAKnD,qBAAL,CAA2BR,CAA3B,EAA8BU,IAD1E,EAC+E;AAC/E;AACInE,uBAAGiH,GAAH,CAAO,UAAQ,KAAKhD,qBAAL,CAA2BR,CAA3B,EAA8BU,IAAtC,GAA6C,cAA7C,GAA6D,KAAKF,qBAAL,CAA2BR,CAA3B,EAA8B2D,UAA3F,GAAuG,MAAvG,GAA8G3D,CAA9G,GAAkH,OAAlH,GAA2H,KAAKQ,qBAAL,CAA2BR,CAA3B,EAA8Ba,KAAzJ,GAAiK,MAAjK,GAA0K,KAAKL,qBAAL,CAA2BR,CAA3B,EAA8Bc,WAA/M;AACA,yBAAKgD,OAAL,CAAa9D,CAAb,EAAe,KAAKQ,qBAAL,CAA2BR,CAA3B,EAA8B2D,UAA7C;AACH;AACJ;AACJ,KAjpBI;AAkpBL;AACAG,WAnpBK,mBAmpBGJ,WAnpBH,EAmpBehD,IAnpBf,EAmpBoB;AACrB,aAAKyD,QAAL,GAAgB,GAAhB;AACA,YAAIC,OAAO,IAAX;AACA;AACA,YAAG1D,QAAQvE,OAAOoC,IAAP,CAAYwC,KAAvB,EACA;AACI;AACA,gBAAIgB,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,KAAc,IAA3B,CAAhB;AACA,gBAAIc,SAASvF,GAAGuF,MAAH,CAAU,KAAKqC,QAAf,EAAwB,KAAKpE,gBAAL,CAAsB2D,WAAtB,CAAxB,CAAb;AACA,gBAAIlC,WAAWjF,GAAG8H,QAAH,CAAY,YAAU;AACjC;AACA;AACH,aAHc,CAAf;AAIA,gBAAIC,SAAS/H,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBD,MAAtB,EAA6BN,QAA7B,CAAb;AACAjF,eAAGiH,GAAH,CAAOE,cAAc,cAAd,GAA8B,KAAKlD,qBAAL,CAA2BkD,WAA3B,EAAwC9C,MAAxC,CAA+C2D,CAA7E,GAAiF,GAAjF,GAAuF,KAAK/D,qBAAL,CAA2BkD,WAA3B,EAAwC9C,MAAxC,CAA+C4D,CAA7I;AACAjI,eAAGiH,GAAH,CAAOE,cAAc,cAAd,GAA8B,KAAK3D,gBAAL,CAAsB2D,WAAtB,EAAmCa,CAAjE,GAAqE,GAArE,GAA2E,KAAKxE,gBAAL,CAAsB2D,WAAtB,EAAmCc,CAArH;AACA;AACA,iBAAKhE,qBAAL,CAA2BkD,WAA3B,EAAwC9C,MAAxC,CAA+CqB,SAA/C,CAAyDqC,MAAzD;AACA;AACA,iBAAK9D,qBAAL,CAA2BkD,WAA3B,EAAwC7C,KAAxC,GAAgD,KAAKL,qBAAL,CAA2BkD,WAA3B,EAAwC5C,WAAxF;AACA,iBAAKN,qBAAL,CAA2BkD,WAA3B,EAAwChD,IAAxC,GAAgD,KAAKF,qBAAL,CAA2BkD,WAA3B,EAAwCC,UAAxF;AACA,iBAAKnD,qBAAL,CAA2BkD,WAA3B,EAAwC9C,MAAxC,CAA+CjB,cAA/C,CAA+D,OAAM+D,WAArE;AACH,SAlBD,MAoBA;AACI;AACA,gBAAI3B,YAAYxF,GAAGyF,SAAH,CAAa9B,KAAKc,MAAL,KAAc,IAA3B,CAAhB;AACA;AACA,gBAAIc,SAASvF,GAAGuF,MAAH,CAAU,KAAKqC,QAAf,EAAwB,KAAKtE,eAAL,CAAqB6D,WAArB,CAAxB,CAAb;AACA,gBAAIlC,WAAWjF,GAAG8H,QAAH,CAAY,YAAU;AACjC;AACA;AACH,aAHc,CAAf;AAIA,gBAAIC,SAAS/H,GAAG2F,QAAH,CAAYH,SAAZ,EAAsBD,MAAtB,EAA6BN,QAA7B,CAAb;AACA;AACAjF,eAAGiH,GAAH,CAAOE,cAAc,aAAd,GAA6B,KAAKnD,oBAAL,CAA0BmD,WAA1B,EAAuC9C,MAAvC,CAA8C2D,CAA3E,GAA+E,GAA/E,GAAqF,KAAKhE,oBAAL,CAA0BmD,WAA1B,EAAuC9C,MAAvC,CAA8C4D,CAA1I;AACAjI,eAAGiH,GAAH,CAAOE,cAAc,aAAd,GAA6B,KAAK7D,eAAL,CAAqB6D,WAArB,EAAkCa,CAA/D,GAAmE,GAAnE,GAAyE,KAAK1E,eAAL,CAAqB6D,WAArB,EAAkCc,CAAlH;;AAEA,iBAAKjE,oBAAL,CAA0BmD,WAA1B,EAAuC9C,MAAvC,CAA8CqB,SAA9C,CAAwDqC,MAAxD;AACA;AACA,iBAAK/D,oBAAL,CAA0BmD,WAA1B,EAAuC7C,KAAvC,GAA+C,KAAKN,oBAAL,CAA0BmD,WAA1B,EAAuC5C,WAAtF;AACA,iBAAKP,oBAAL,CAA0BmD,WAA1B,EAAuChD,IAAvC,GAA+C,KAAKH,oBAAL,CAA0BmD,WAA1B,EAAuCC,UAAtF;AACA,iBAAKpD,oBAAL,CAA0BmD,WAA1B,EAAuC9C,MAAvC,CAA8CjB,cAA9C,CAA8D,OAAM+D,WAApE;AACH;AAEJ;AAhsBI,CAAT","file":"AnswerScene.js","sourceRoot":"../../../../../assets/scrips/scene","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar Player = require('Player')\nvar Question = require('Question')\nvar GameState = cc.Enum({\n    PIPEI: 1,\n    ANSWER: 2,\n    JUDGE: 3,\n    REVIVE: 4,\n    END: 5\n}); \nvar side_player_max_num = 15;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // player:Player,\n        btn_right:cc.Node,\n        btn_wrong:cc.Node,\n        lbl_question_info:cc.Label,\n        lbl_question_title:cc.Label,\n        panel_root:cc.Node,\n        //结算界面相关\n        panel_revive:cc.Node,\n        btn_exit:cc.Node,\n        btn_revive:cc.Node,\n        lbl_time:cc.Label,\n    },\n\n    onLoad(){\n        //获取控件\n        // this.lbl_question_info = cc.find(\"Canvas/panel_root/img/img_datiban/lbl_question_info\");\n        // this.lbl_question_title = cc.find(\"Canvas/panel_root/img/img_datiban/lbl_question_title\");\n        // this.btn_right = cc.find(\"Canvas/panel_root/btn/btn_right\");\n        // this.btn_wrong = cc.find(\"Canvas/panel_root/btn/btn_wrong\");\n        this.panel_root = cc.find(\"Canvas/panel_root\");\n        //匹配中 准备进人\n        this.gameState = GameState.PIPEI;\n        // this.isBeginPipei = false;\n        //初始化答题 题库相关\n        this.judgement = null;\n\n        _G.QuestionClass = new Question();\n        _G.QuestionClass.init();\n\n        this.initUI();\n        //其实 应该两个类 一个是player 一个是一群玩家的类 简单点写了\n        this.MySide = Player.Side.left;\n        //主角是否在移动中\n        this.myPlayerMoving = false\n        this.initPlayer();\n        this.dead_times = 0;\n        //匹配倒计时 10秒 TODO\n        this.Pipei_time = 4; ///改为0跳过匹配阶段 \n        //答题时间\n        this.Answer_time = 5; \n        //我自己的位置\n        this.MyIndex =0;\n        //自己是否在移动\n        this.isMoving = false;\n\n\n        //结算界面相关\n        this.reviveTime = 5;\n    },\n    initUI:function(){\n        this.lbl_question_info.string = \"匹配中\";\n        this.lbl_question_title.string = \"10\";\n        this.btn_right.active = false;\n        this.btn_wrong.active = false;\n        this.btn_right.on(cc.Node.EventType.TOUCH_START,this.rightClickEvent,this);\n        this.btn_wrong.on(cc.Node.EventType.TOUCH_START,this.wrongClickEvent,this);\n        //复活界面相关\n        if(_G.Enable_Ads_Sdk==true)\n        {\n            this.btn_exit.on(cc.Node.EventType.TOUCH_START,this.exitviveEvent,this);\n            this.btn_revive.on(cc.Node.EventType.TOUCH_START,this.reviveEvent,this);\n            this.lbl_time.string = \"10\";\n            this.panel_revive.setLocalZOrder(1000)\n        }\n    },\n    //初始化玩家终点位置\n    initPlayer:function(){\n        _G.AnswerScene = this\n        //初始化 玩家所有的位置\n        this.player_pos_left = new Array();\n        this.player_pos_right = new Array();\n        for (var i = 0; i <side_player_max_num+6; i++) {\n            this.player_pos_left[i] = cc.v2(100+i%3*100,400+Math.floor(i/3)*100) //位置上下会挤一些\n        }\n        for (var i = 0; i < side_player_max_num+6; i++) {\n            this.player_pos_right[i] = cc.v2(450+i%3*100,400+Math.floor(i/3)*100)\n        }\n        //左边和右边的人数 初始化都是0\n        this.left_player_num = 0;\n        this.right_player_num = 0;\n        //提前定好 这局会有多少人参加\n        this.match_player_num = 50//45+Math.random(10);\n        //初始化真正参与游戏的人们\n        this.player_pos_left_node = new Array()\n        this.player_pos_right_node = new Array()\n\n        // var PlayerClass = new Player()\n        // this.nodes = PlayerClass.init(this.match_player_num)\n\n        for (var i = 0;i<this.match_player_num;i++)\n        {\n            // var node = this.nodes[i]\n            var PlayerClass = new Player()\n            //TODO 未来优化体验 应该是在场上已经有一波人 之后再飞新的人物进场\n            PlayerClass.init(i)\n            if(i ==0)\n            {\n                this.MySide = PlayerClass.side\n                if(this.MySide == Player.Side.left)\n                    this.judgement = \"对\"\n                else{\n                    this.judgement = \"错\"\n                }\n            }\n            if(this.left_player_num>=side_player_max_num || this.right_player_num>=side_player_max_num)\n            {\n                this.match_player_num = i;\n                break;\n            }\n            if(PlayerClass.side == Player.Side.left)\n            {\n                this.player_pos_left_node[this.left_player_num] = PlayerClass;\n                this.panel_root.addChild(PlayerClass.player);\n                PlayerClass.player.setLocalZOrder (1000- this.left_player_num)\n                PlayerClass.index = this.left_player_num\n                PlayerClass.targetindex = this.left_player_num\n                // PlayerClass.player.setPosition(this.player_pos_left[PlayerClass.player.index]) //目标位置\n                this.left_player_num++;\n            }\n            else if(PlayerClass.side == Player.Side.right){\n                this.player_pos_right_node[this.right_player_num] = PlayerClass;\n                this.panel_root.addChild(PlayerClass.player);\n                PlayerClass.player.setLocalZOrder( 1000- this.right_player_num)\n                PlayerClass.index = this.right_player_num\n                PlayerClass.targetindex = this.right_player_num\n                // PlayerClass.player.setPosition(this.player_pos_right[PlayerClass.player.index]) //目标位置\n                this.right_player_num++;\n            }\n            //初始化这些node的位置\n            var random = Math.random() >0.5 && Player.Side.left || Player.Side.right;\n            if (random == Player.Side.left){\n                PlayerClass.player.setPosition(cc.v2(-200,1400));\n            }\n            else{\n                PlayerClass.player.setPosition(cc.v2(820,1400));\n            }\n        }\n        _G.QuestionClass.all_match_player = this.player_pos_left_node.length + this.player_pos_right_node.length\n        // this.isBeginPipei = true;\n        this.BeginGameStatePIPEI();\n    },\n    //匹配阶段开始播放人物移动动画\n    BeginGameStatePIPEI:function()\n    {\n        this.move_time = 0.3;\n        //移动人物 分阶段的跑路\n        var left_needToRunPlayer = 0;\n        var right_needToRunPlayer = 0;\n        this.callback = function() {\n            if(this.Pipei_time == 0 )\n            {\n                this.unschedule(this.callback);\n                // this.isBeginPipei = false;\n                this.gameState = GameState.BEGIN;\n                //开始答题阶段\n                this.BeginGameStateBEGIN();\n            }\n            this.lbl_question_title.string = (this.Pipei_time);\n            if(this.Pipei_time == 3)//最后一秒 所有人都跑路\n            {\n                //剩余的人 这里在跑路一波\n                var last_left_player_num = this.left_player_num - left_needToRunPlayer;\n                for (var i = 0; i <last_left_player_num; i++) {\n                    var moveAction = cc.moveTo(this.move_time,this.player_pos_left[left_needToRunPlayer+i]);\n                    var delaytime = cc.delayTime(Math.random());\n                    this.player_pos_left_node[left_needToRunPlayer+i].player.runAction(cc.sequence(delaytime,moveAction )) ;\n                }\n                var last_right_player_num = this.right_player_num - right_needToRunPlayer;\n                for (var i = 0; i <last_right_player_num; i++) {\n                    var moveAction = cc.moveTo(this.move_time,this.player_pos_right[right_needToRunPlayer+i]);\n                    var delaytime = cc.delayTime(Math.random());\n                    this.player_pos_right_node[right_needToRunPlayer+i].player.runAction(cc.sequence(delaytime,moveAction )) ;\n                }\n                // this.isBeginPipei = false\n            }\n            else if(this.Pipei_time <3 && this.Pipei_time>0)\n            {\n\n            }\n            else{\n                //当前这一秒左边多少人跑路\n                var secendToRunPlayer = (this.Pipei_time -3 )/ ((this.Pipei_time-3)*(this.Pipei_time-2)/2)* this.left_player_num;\n                for (var i = 0; i <Math.floor(secendToRunPlayer); i++) {\n                    var moveAction = cc.moveTo(this.move_time,this.player_pos_left[left_needToRunPlayer+i]);\n                    var delaytime = cc.delayTime(Math.random());\n                    this.player_pos_left_node[left_needToRunPlayer+i].player.runAction(cc.sequence(delaytime,moveAction )) ;\n                }\n                left_needToRunPlayer = left_needToRunPlayer+Math.floor(secendToRunPlayer);\n                //当前这一秒右边多少人跑路\n                var secendToRunPlayer =  (this.Pipei_time -3 )/28 * this.right_player_num;\n                for (var i = 0; i <Math.floor(secendToRunPlayer); i++) {\n                    var moveAction = cc.moveTo(this.move_time,this.player_pos_right[right_needToRunPlayer+i]);\n                    var delaytime = cc.delayTime(Math.random());\n                    this.player_pos_right_node[right_needToRunPlayer+i].player.runAction(cc.sequence(delaytime,moveAction )) ;\n                }\n                right_needToRunPlayer = right_needToRunPlayer+Math.floor(secendToRunPlayer);\n            }\n            this.Pipei_time--;\n         };\n\n        this.schedule(this.callback,1);\n    },\n    //开始答题阶段\n    BeginGameStateBEGIN:function()\n    {   \n        this.btn_wrong.active = true;\n        this.btn_right.active = true;\n        //\n        var Answer_time = this.Answer_time;\n        //随机出一个题目\n        var questioninfo = _G.QuestionClass.findQuestion();\n        this.lbl_question_title.string = Answer_time;\n\n        this.lbl_question_info.string = questioninfo.question;\n        this.Answer_info = questioninfo.answer;\n        this.QuestionCallback = function(){\n            if(Answer_time <= this.Answer_time - 1){\n                if(this.myPlayerMoving == false && Answer_time>1)\n                {\n                    this.runOtherPerson();\n                }\n                if (Answer_time <=0)\n                {\n                    this.unschedule(this.QuestionCallback)\n                    this.gameState = GameState.JUDGE;\n                    //进入判题阶段\n                    this.BeginGameStateJUDGE();\n                }\n                this.lbl_question_title.string = Answer_time;\n                //移动其他答题的人们\n                // if ( Math.floor(Answer_time %2) == 1 )\n                // {\n                \n                // }\n            }\n            Answer_time--;\n        }\n        this.schedule(this.QuestionCallback,1);\n    },\n    //开始复活\n    BeginGameStateREVIVE:function()\n    {\n        this.reviveCallBack = function(){\n            this.lbl_time.string = this.reviveTime\n            if(this.reviveTime==0){\n                this.panel_revive.active = false\n                this.BeginGameStateEnd()\n                this.unschedule(this.reviveCallBack)\n            }\n            this.reviveTime --;\n        }\n        this.schedule(this.reviveCallBack,1)\n    },\n    exitviveEvent:function()\n    {\n        this.unschedule(this.reviveCallBack)\n        this.panel_revive.active = false\n        this.BeginGameStateEnd()\n    },\n    reviveEvent:function()\n    {\n        //接入广告 玩家点击关闭以后执行回调 如果看完广告了则复活\n        //如果复活 则继续游戏 执行 BeginGameStateBEGIN() 和 this.unschedule(this.reviveCallBack)\n        //如果广告没看完 则倒计时继续 不理 这里 需不需要倒计时暂停 另议\n        //重新创建自己的对象？还是只是先隐藏\n        this.panel_revive.active = false\n        this.BeginGameStateBEGIN()\n    },\n    //游戏结束 弹出结算界面\n    BeginGameStateEnd:function()\n    {\n        //TODO 这里如果最后所有人都打错了。。。存在一个显示的bug\n        if(this.player_pos_left_node.length + this.player_pos_right_node.length ==0){\n            _G.QuestionClass.paiming = 3\n        }\n        else{    \n            _G.QuestionClass.paiming = this.player_pos_left_node.length + this.player_pos_right_node.length\n        }\n        //这里存在一个bug，可以之后优化 答错了用户还可以复活，这里统计答题正确与否 取决于题库和排名进行计算\n        cc.director.loadScene(\"SettleScene\");\n    },\n    //开始判断题目\n    BeginGameStateJUDGE:function()\n    {\n        this.btn_wrong.active = false;\n        this.btn_right.active = false;\n\n        \n\n        //动画播放完成后的回调\n        this.judgeCallback = function(){\n            //TODO 这里播放判断题目正确与否的动画,动画播放完成执行回调，走下面的\n            this.unschedule(this.judgeCallback);\n\n            if(this.MySide == Player.Side.left){\n                this.MyIndex = this.findMyIndex(Player.Side.left)\n                this.tempPlayer = this.player_pos_left_node[this.MyIndex]\n            }\n            else if(this.MySide == Player.Side.right)\n            {\n                this.MyIndex = this.findMyIndex(Player.Side.right)\n                this.tempPlayer = this.player_pos_right_node[this.MyIndex]\n            }\n            //删除掉所有答错题目的人\n            if(this.Answer_info == \"对\")//清除掉右边所有人 并且动画在右边播放\n            {\n                for (var i = 0; i <this.player_pos_right_node.length; i++) {\n                    this.player_pos_right_node[i].player.removeFromParent()\n                }\n                this.player_pos_right_node = new Array();\n                this.right_player_num = 0\n            }\n            else if(this.Answer_info == \"错\")\n            {\n                for (var i = 0; i <this.player_pos_left_node.length; i++) {\n                    this.player_pos_left_node[i].player.removeFromParent()\n                }\n                this.player_pos_left_node = new Array();\n                this.left_player_num = 0\n               \n            }\n            if(this.judgement == this.Answer_info)\n            {\n                //正确\n                if(this.player_pos_left_node.length + this.player_pos_right_node.length == 1)\n                {\n                    cc.log(\"吃鸡了！！！\")\n                    //TODO 弹出吃鸡的结算界面\n                    this.BeginGameStateEnd()\n                }\n                else\n                {\n                    cc.log(\"答对了，还有多少人，继续答题吧\")\n                    //开始下一道提\n                    this.BeginGameStateBEGIN();\n                }\n            }\n            else\n            {\n                this.dead_times++\n                if((_G.Enable_Ads_Sdk==true && this.dead_times>=3) || _G.Enable_Ads_Sdk == false)\n                {\n                    cc.log(\"错误次数太多了，结束！\")\n                    //TODO 弹出结算界面\n                    this.BeginGameStateEnd()\n                }\n                else\n                {\n                    cc.log(\"答错了，复活吧\")\n                    //弹出是否复活的界面 --玩家复活看广告，成功看完回调，继续beigin答题，未看完则还是继续复活，复活倒计时结束，也结束答题，弹出界面界面\n                    this.panel_revive.active = true\n                    this.BeginGameStateREVIVE()\n                }\n            }\n        }\n        this.schedule(this.judgeCallback,1,1);\n    },\n    //\n    findMyIndex:function(side)\n    {\n        if(side == Player.Side.right)\n        {\n            for (var i = 0; i < this.player_pos_right_node.length; i++) {\n                if(this.player_pos_right_node[i].playerFlag == 0)\n                {\n                    return i\n                }\n            }\n        }\n        else\n        {\n            for (var i = 0; i < this.player_pos_left_node.length; i++) {\n                if(this.player_pos_left_node[i].playerFlag == 0)\n                {\n                    return i\n                }\n            }\n        }\n    },\n    //正确的点击\n    rightClickEvent:function(){\n        //自己的主角往左移动\n        this.judgement = \"对\";\n\n        if(this.MySide == Player.Side.right)\n        {\n            this.myPlayerMoving = true\n            //找当前坐标\n            var index = this.findMyIndex(Player.Side.right)\n            // if(this.player_pos_right_node[index].isMoving == false)\n            // {\n                this.player_pos_right_node[index].side = Player.Side.left\n                // cc.log(\"右边 谁移动  \" + index);\n                //将这个人挪到右边\n                var other_index //= Math.floor((Math.random()-0.01)*3)\n                //挪的一边\n                if(this.player_pos_left_node.length==0)\n                {\n                    other_index = 0\n                    this.player_pos_right_node[index].targetindex = other_index;\n                    this.player_pos_right_node[index].targetside = Player.Side.left\n                        // cc.log(\"右边 移动到  \" + other_index);\n                    var temp = this.player_pos_right_node[index]\n                    this.player_pos_right_node.splice(index,1);//二参数为1 删除元素\n                    // this.player_pos_left_node.splice(index,0,this.player_pos_right_node[other_index]);//二参数为0 添加元素\n                    //this.player_pos_right_node.splice(other_index,1)\n                    this.player_pos_left_node.splice(other_index,0,temp);//二参数为0 添加元素\n                    //移动自己节点\n                    this.runNode(other_index,Player.Side.left)\n                    //把最后面一个元素 填充到这边\n                    if(this.player_pos_right_node.length !=0)\n                    {\n                        this.player_pos_right_node[this.player_pos_right_node.length-1].targetindex = index\n                        var temp = this.player_pos_right_node[this.player_pos_right_node.length-1]\n                        this.player_pos_right_node.splice(this.player_pos_right_node.length-1,1)\n                        this.player_pos_right_node.splice(index,0,temp)\n\n                        this.runNode(index,Player.Side.right)\n                    }\n                }\n                else \n                {\n                    if (this.player_pos_right_node.length<=3){\n                        other_index = Math.floor((Math.random()-0.01)*this.right_player_num)\n                    }\n                    else{\n                        other_index = Math.floor((Math.random()-0.01)*3)\n                    }\n                    this.player_pos_right_node[index].targetindex = other_index;\n                    // cc.log(\"右边 移动到  \" + other_index);\n                    var temp = this.player_pos_right_node[index]\n                    this.player_pos_right_node.splice(index,1);//二参数为1 删除元素\n                    this.player_pos_right_node.splice(index,0,this.player_pos_left_node[other_index]);//二参数为0 添加元素\n                    this.player_pos_left_node.splice(other_index,1)\n                    this.player_pos_left_node.splice(other_index,0,temp);//二参数为0 添加元素\n\n                    this.runNode(other_index,Player.Side.left)\n                    this.runNode(index,Player.Side.right)\n                }\n\n\n                \n                this.left_player_num =this.player_pos_left_node.length;\n                this.right_player_num = this.player_pos_right_node.length\n\n                this.MySide = Player.Side.left\n                this.MyIndex = other_index\n                this.myPlayerMoving = false\n            // }\n        \n        }\n    },\n    //错误的点击\n    wrongClickEvent:function(){\n        //自己的主要向右移动\n        this.judgement = \"错\";\n        if(this.MySide == Player.Side.left)\n        {\n\n            this.myPlayerMoving = true\n            //找当前坐标\n            var index = this.findMyIndex(Player.Side.left)\n            // if(this.player_pos_right_node[index].isMoving == false)\n            // {\n                this.player_pos_left_node[index].side = Player.Side.right\n                // cc.log(\"右边 谁移动  \" + index);\n                //将这个人挪到右边\n                var other_index //= Math.floor((Math.random()-0.01)*3)\n                //挪的一边\n                if(this.player_pos_right_node.length==0)\n                {\n                    other_index = 0\n                    this.player_pos_left_node[index].targetindex = other_index;\n                    this.player_pos_left_node[index].targetside = Player.Side.right\n                        // cc.log(\"右边 移动到  \" + other_index);\n                    var temp = this.player_pos_left_node[index]\n                    this.player_pos_left_node.splice(index,1);//二参数为1 删除元素\n                    // this.player_pos_left_node.splice(index,0,this.player_pos_right_node[other_index]);//二参数为0 添加元素\n                    //this.player_pos_right_node.splice(other_index,1)\n                    this.player_pos_right_node.splice(other_index,0,temp);//二参数为0 添加元素\n                    //移动自己节点\n                    this.runNode(other_index,Player.Side.right)\n                    //把最后面一个元素 填充到这边\n                    if(this.player_pos_left_node.length != 0)\n                    {\n                        this.player_pos_left_node[this.player_pos_left_node.length-1].targetindex = index\n                        var temp = this.player_pos_left_node[this.player_pos_left_node.length-1]\n                        this.player_pos_left_node.splice(this.player_pos_left_node.length-1,1)\n                        this.player_pos_left_node.splice(index,0,temp)\n\n                        this.runNode(index,Player.Side.left)\n                    }\n                }\n                else \n                {\n                    if (this.player_pos_right_node.length<=3){\n                        other_index = Math.floor((Math.random()-0.01)*this.right_player_num)\n                    }\n                    else{\n                        other_index = Math.floor((Math.random()-0.01)*3)\n                    }\n                    this.player_pos_left_node[index].targetindex = other_index;\n                    // cc.log(\"右边 移动到  \" + other_index);\n                    var temp = this.player_pos_left_node[index]\n                    this.player_pos_left_node.splice(index,1);//二参数为1 删除元素\n                    this.player_pos_left_node.splice(index,0,this.player_pos_right_node[other_index]);//二参数为0 添加元素\n                    this.player_pos_right_node.splice(other_index,1)\n                    this.player_pos_right_node.splice(other_index,0,temp);//二参数为0 添加元素\n\n                    this.runNode(index,Player.Side.left)\n                    this.runNode(other_index,Player.Side.right)\n                }\n                this.left_player_num =this.player_pos_left_node.length;\n                this.right_player_num = this.player_pos_right_node.length\n\n                this.MySide = Player.Side.right\n                this.MyIndex = other_index\n\n                this.myPlayerMoving = false\n            // }\n        }\n    },\n    //别人跑路\n    //TODO--BUG 如果某节点正在移动 又被随机到移动 那么位置可能会发生偏差 之后改\n    runOtherPerson:function(){\n        //后期针对题目难度 要划分占边的人数\n        //随机出来 这一秒 有多少人在移动\n        cc.log(\"左边多少人\"+this.left_player_num)\n        cc.log(\"右边多少人\"+this.right_player_num)\n        var runPersionNum_left\n        if(this.player_pos_left_node.length <= 3)\n        {\n            runPersionNum_left =0 \n        }\n        else{\n            runPersionNum_left =  Math.floor(Math.random() * 5); //这里可能会均分人数\n            if (runPersionNum_left>this.left_player_num)\n            {\n                runPersionNum_left = this.left_player_num\n            }\n            else if(runPersionNum_left + this.right_player_num >30)\n            {\n                runPersionNum_left = runPersionNum_left - (runPersionNum_left + this.right_player_num -30)\n            }\n        }\n        cc.log(\"runPersionNum_left\"+runPersionNum_left)\n        for (let i = 0; i < runPersionNum_left; i++) {\n            //var index = Math.floor(3+(Math.random()-0.001)*(this.player_pos_left_node.length-3))\n            var index = Math.floor((Math.random()-0.001)*(this.player_pos_left_node.length))\n            //当人数少于3个的时候 \n            if(index >= this.player_pos_left_node.length )\n            {\n                continue\n            }\n            if(this.player_pos_left_node[index].playerFlag == 0)\n            {\n                continue\n            }\n            // else if(this.player_pos_left_node[index].isMoving == false)\n            // {\n                this.player_pos_left_node[index].targetside = Player.Side.right\n                cc.log(\"左边 谁移动  \" + index);\n                //将这个人挪到右边\n                // var other_index = Math.floor(3+(Math.random()-0.001)*(this.player_pos_right_node.length-3))\n                var other_index = Math.floor((Math.random()-0.001)*(this.player_pos_right_node.length))\n                this.player_pos_left_node[index].targetindex = other_index;\n                cc.log(\"左边 移动到  \" + other_index);\n\n                this.player_pos_right_node.splice(other_index,0,this.player_pos_left_node[index]);//二参数为0 添加元素\n                this.player_pos_left_node.splice(index,1);//二参数为1 删除元素\n                //右边的node index往后挪\n                for (var j = other_index+1; j < this.player_pos_right_node.length; j++) {\n                    this.player_pos_right_node[j].targetindex = j\n                }\n                for (var k = index; k<this.player_pos_left_node.length;k++)\n                {\n                    this.player_pos_left_node[k].targetindex = k\n                }\n                //修改数据\n                this.left_player_num--;\n                this.right_player_num++;\n            // }\n        }\n\n        var runPersionNum_right \n        if(this.player_pos_right_node.length <= 3)\n        {\n            runPersionNum_right =0 \n        }\n        else{\n            runPersionNum_right = Math.floor(Math.random()*5)\n            if (runPersionNum_right>this.right_player_num)\n            {\n                runPersionNum_right = this.right_player_num\n            }\n            else if(runPersionNum_right + this.left_player_num >30)\n            {\n                runPersionNum_right = runPersionNum_right - (runPersionNum_right + this.left_player_num -30)\n            }\n        }\n        cc.log(\"runPersionNum_right\"+runPersionNum_right)\n        for (let i = 0; i < runPersionNum_right; i++) {\n            var index = Math.floor(3+(Math.random()-0.001)*(this.player_pos_right_node.length-3))\n            if(index >= this.player_pos_right_node.length )\n            {\n                continue\n            }\n            if(this.player_pos_right_node[index].playerFlag == 0)\n            {\n                continue\n            }\n            // if(this.player_pos_right_node[index].isMoving == false)\n            // {\n                this.player_pos_right_node[index].targetside = Player.Side.left\n\n                cc.log(\"右边 谁移动  \" + index);\n                //将这个人挪到右边\n                var other_index = Math.floor(3+(Math.random()-0.001)*(this.player_pos_left_node.length-3))\n                this.player_pos_right_node[index].targetindex = other_index;\n\n                cc.log(\"右边 移动到  \" + other_index);\n\n                this.player_pos_left_node.splice(other_index,0,this.player_pos_right_node[index]);//二参数为0 添加元素\n                this.player_pos_right_node.splice(index,1);//二参数为1 删除元素\n                //右边的node index往后挪\n                for (var j = other_index+1; j < this.player_pos_left_node.length; j++) {\n                    this.player_pos_left_node[j].targetindex = j\n                }\n                for (var k = index; k<this.player_pos_right_node.length;k++)\n                {\n                    this.player_pos_right_node[k].targetindex = k\n                }\n                //修改数据\n                this.right_player_num--;\n                this.left_player_num++;\n            // }\n        }\n        for (var i = 0; i < this.player_pos_left_node.length; i++) {\n            if(this.player_pos_left_node[i].targetindex != this.player_pos_left_node[i].index || \n            this.player_pos_left_node[i].targetside != this.player_pos_left_node[i].side)//&& this.player_pos_left_node[i].isMoving==false)\n            {\n                cc.log(\"side \"+this.player_pos_left_node[i].side + \" targetside \"+ this.player_pos_left_node[i].targetside+ \" i \"+i + \"from \"+ this.player_pos_left_node[i].index  +\" to \" + this.player_pos_left_node[i].targetindex );\n                this.runNode(i,this.player_pos_left_node[i].targetside)\n            }\n        }\n        for (var i = 0; i < this.player_pos_right_node.length; i++) {\n            if(this.player_pos_right_node[i].targetindex != this.player_pos_right_node[i].index || \n            this.player_pos_right_node[i].targetside != this.player_pos_right_node[i].side)//&& this.player_pos_right_node[i].isMoving==false)\n            {\n                cc.log(\"side \"+this.player_pos_right_node[i].side + \" targetside \"+ this.player_pos_right_node[i].targetside+ \"i   \"+i + \"from \"+ this.player_pos_right_node[i].index  +\" to \" + this.player_pos_right_node[i].targetindex );\n                this.runNode(i,this.player_pos_right_node[i].targetside)\n            }\n        }\n    },\n    //哪个节点移动\n    runNode(other_index,side){\n        this.moveTime = 0.3\n        var self = this\n        //挪自己的位置\n        if(side == Player.Side.right)\n        {\n            // this.player_pos_right_node[other_index].isMoving = true;\n            var delaytime = cc.delayTime(Math.random()*0.69)\n            var moveTo = cc.moveTo(this.moveTime,this.player_pos_right[other_index])\n            var callback = cc.callFunc(function(){\n                // self.player_pos_right_node[other_index].isMoving = false;\n                // this.player_pos_right_node[other_index].player.stopAllActions()\n            })\n            var action = cc.sequence(delaytime,moveTo,callback)\n            cc.log(other_index + \" right现在的位置 \" +this.player_pos_right_node[other_index].player.x + \" \" + this.player_pos_right_node[other_index].player.y)\n            cc.log(other_index + \" right要去的位置 \" +this.player_pos_right[other_index].x + \" \" + this.player_pos_right[other_index].y)\n            // cc.log(\"other_index\"+other_index);\n            this.player_pos_right_node[other_index].player.runAction(action)\n            //TODO 放到回调里\n            this.player_pos_right_node[other_index].index = this.player_pos_right_node[other_index].targetindex\n            this.player_pos_right_node[other_index].side  = this.player_pos_right_node[other_index].targetside\n            this.player_pos_right_node[other_index].player.setLocalZOrder( 1000- other_index)\n        }\n        else\n        {\n            // this.player_pos_left_node[other_index].isMoving = true;\n            var delaytime = cc.delayTime(Math.random()*0.69)\n            // var delaytime = cc.delayTime(0.2)\n            var moveTo = cc.moveTo(this.moveTime,this.player_pos_left[other_index])\n            var callback = cc.callFunc(function(){\n                // self.player_pos_left_node[other_index].isMoving = false;\n                // this.player_pos_left_node[other_index].player.stopAllActions()\n            })\n            var action = cc.sequence(delaytime,moveTo,callback)\n            // cc.log(\"other_index\"+other_index);\n            cc.log(other_index + \" left现在的位置 \" +this.player_pos_left_node[other_index].player.x + \" \" + this.player_pos_left_node[other_index].player.y)\n            cc.log(other_index + \" left要去的位置 \" +this.player_pos_left[other_index].x + \" \" + this.player_pos_left[other_index].y)\n            \n            this.player_pos_left_node[other_index].player.runAction(action)\n            //TODO 放到回调里\n            this.player_pos_left_node[other_index].index = this.player_pos_left_node[other_index].targetindex\n            this.player_pos_left_node[other_index].side  = this.player_pos_left_node[other_index].targetside\n            this.player_pos_left_node[other_index].player.setLocalZOrder( 1000- other_index)\n        }\n\n    },\n\n\n});\n"]}